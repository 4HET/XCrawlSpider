!function(){"use strict";var c=!0,e="_MeiTuanALogObject",p=1,r="dianping_nova",h="waimai",g="group",u="demo",y="4.22.1",m="lxcuid",_="uuid",w="msid",v="cityid",q="utm",t="utm_source",n="utm_medium",i="utm_content",a="utm_term",o="utm_campaign",b="uid",s="scene",x="userid",k="dpid",S="appnm",f="union_id",O="web_env",j="wxmp_env",l="wxid",A="_lx_validcode",I="pd_data",C=/^(([^? \r\n]*)\?)?([^?# \r\n]+)(#\S+)?$/,E=setTimeout,d=clearTimeout,T=1,D=2,N=3,M=4,F=5,R=6,P=20,L=7,B="lx-web-config";function V(t){var e=t;return t&&t.code&&(e=t.code),e===T?"E_TIME_OUT":e===D?"E_NO_JSBRIDGE":e===N?"E_KNB_FAIL":e===M?"E_KNB_CB_FAIL":e===F?"E_KNB_NOT_EXIST":e===P?"ERR_PARAMS":e===R?"E_KNB_METHOD_NOT_SUPPORT":"unknown error: "+e}var U=200,W=500,J=-1,K="PV",$="PD",Q="MC",X="SC",z="MV",H="MVL",G="ME",Z="BO",Y="BP",tt="event_type",et="val_act",nt="val_cid",rt="index",it="element_id",at="lx_inner_data",ot="pageView",ct="systemCheck",ut="moduleClick",st="order",ft="order_id",lt=1e3,dt=2,vt=0,pt=-1,ht=0,gt=1,mt=10080,_t=1576800,yt=30,wt="_lx_utm",bt="_lxsdk",xt="_lxsdk_cuid",kt="_lxsdk_dpid",St="_lxsdk_s",Ot="latlng",jt="_lxsdk_rr",At="_lxsdk_rc",qt="msid",It="ms",Ct="category",Et="c",Tt="login_type",Dt="lt",Nt="locate_city_id",Mt="lci",Ft="sdk_ver",Rt="sv",Pt="lxcuid",Lt="lxid",Bt="val_lab",Vt="val_bid",Ut="val_val",Wt="sf",Jt="sdk_env",Kt="online",$t="offline",Qt="__$lx_beacon_",Xt="_lx_urltag",zt={category:c,union_id:c,lxcuid:c,app:c,sdk_ver:c,appnm:c,ch:c,lch:c,ct:c,did:c,dm:c,ua:c,msid:c,uuid:c,lat:c,log:c,net:c,os:c,idfa:c,pushid:c,subcid:c,mac:c,imsi:c,uid:c,logintype:c,cityid:c,apn:c,mno:c,pushSetting:c,wifi:c,bht:c,ip:c,vendorid:c,geohash:c,dtk:c,sns:c,android_id:c,version_code:c,brand:c,utm:c},Ht="post",Gt="get",Zt="__lxvalidation",Yt="plx.meituan.com",te="lx1.meituan.net",ee="hlx.meituan.com",ne=200,re=-3,ie=function(){},ae="pageLeave";function oe(){return window}function ce(){return oe().XMLHttpRequest}var ue,se,fe=(ue=ce(),se=ue&&"withCredentials"in new ue,function(){return se}),le=/__lxvalidation=([\w.]+)/i,de=10,ve=!1,pe=void 0,he=void 0,ge={};function me(t){var e,n=0===Wn().indexOf("http:")?"http:":"https:",r=n+"//"+t+"/",i=Ze.search.match(le)||[],a=function(){var t=qn.get(Zt);if(t){var e=t.split("|");return{mis:e[0],env:e[1]||""}}return t||{}}();return(e=i&&i[1]||a.mis||"")&&(qn.top(Zt,e+"|",de),r=n+"//"+t+"/?mis="+e,_e.debug=e),r}var _e={noHeadless:!0,nt:vt,inWXMP:!1,pageValLab:null,pageEnv:null,use_post:!1,cid:null,appnm:null,quit:null,useQR:!1,onWebviewAppearAutoPV:!0,nativeAutoPD:!0,positiveLab:!0,nativeSDKVer:null,cacheRetryMinutes:5,debug:!1,autoPD:!0,sessionScope:"top",isDev:!1,reportDelay:500},ye=[];_e.on=function(t,e){ye.push({name:t,fn:e})};var we={MVL:!(_e.emit=function(r,i,a,o,c){Sn.each(ye,function(t){var e=t.name,n=t.fn;e===r&&n(i,a,o,c)})}),QR:!1,getReqId:!1};function be(t){return!!we[t]}var xe=void 0;function ke(){return xe}var Se={path:location.href.replace(/^(.+\/\/[^?#]+).*$/,"$1"),isHeadless:function(){if(0<=Yn)return Yn;var t=navigator.userAgent;Yn=0,/HeadlessChrome/.test(t)&&(Yn+=1);navigator.webdriver&&(Yn+=10);window.chrome||(Yn+=100);navigator.plugins&&0!==navigator.plugins.length||(Yn+=1e3);/mtdp-searchspider/.test(t)&&(Yn+=1e4);/spider/.test(t)&&(Yn+=1e5);t&&""!==t||(Yn+=1e6);return Yn}(),labv:10006,cv:"prod",web:1,proxy:"function"==typeof window.Proxy&&/native code/.test(window.Proxy.toString())?1:0};function Oe(t,e){t&&null==e?delete Se[t]:Se[t]=e}function je(t){return t?Se[t]:Se}function Ae(t,e){wn.isStr(t)&&(ge[t]=e)}function qe(t){ve=t}function Ie(){return ve===p}function Ce(t){return pe&&!t||(pe=me(Yt)),pe}var Ee=[te,"lx2.meituan.net"],Te=0;function De(t){if(!he||t){var e=Ee[parseInt(Te++%12/6)];he=me(e)}return he}var Ne=void 0;function Me(){if(rn!==Ne)return Ne;var t=Ye.getElementsByTagName("meta");return Ne="off"===Mn(t,"lx:native-report")}var Fe=vt;function Re(){return Fe}function Pe(t){Me()||(Fe=t)}var Le=!1;function Be(t){Le=!!t}var Ve=5e3,Ue=50,We={MVL:{}},Je=void 0,Ke=void 0;function $e(t,e,n,r){r=r||{};var i=e.category,a=n.req_id,o=n.val_cid,c=n.val_bid,u=r.tag;if(We[t]&&wn.isStr(t)&&wn.isStr(i)&&wn.isStr(a)&&wn.isStr(o)&&wn.isStr(c)){var s=i+"_"+a+"_"+o+"_"+c,f=We[t];wn.isObj(f[s])||(f[s]={env:bn(!0,{},e),evs:n,lab:[]}),wn.isObj(u)&&(f[s].evs.tag=u);var l=bn(!0,n.val_lab,{_seq:n.seq,_tm:n.tm});f[s].lab.push(l),function(){var t=0;for(var e in We){var n=We[e];for(var r in n){var i=n[r].lab;t+=i.length||0}}Ue<t&&ze()}()}}function Qe(t,e){var n=(e||{}).withUnload,r=We[t];if(wn.isObj(r)){var i=[];for(var a in r){var o=r[a],c=!1;if(o.lab&&o.lab.length){var u=o.env,s=o.evs,f={mv_list:o.lab,custom:{_withUnload:!!n}};s.val_lab=f;for(var l=0,d=i.length;l<d;l++){var v=i[l];if(!Xe(v,u)){v.evs.push(s),c=!0;break}}c||(u.evs=[s],i.push(u))}}i.length&&Ke.send(i),We[t]={}}}function Xe(t,e){var n=0,r=0;for(var i in t)t.hasOwnProperty(i)&&n++;for(var a in e)e.hasOwnProperty(a)&&r++;var o=r<n?t:e,c=n<=r?t:e;for(var u in o){if(!(-1<"evs|".indexOf(u+"|")))if(wn.isObj(o[u])&&wn.isObj(c[u])){if(Xe(o[u],c[u]))return!0}else if(o[u]!==c[u])return!0}return!1}function ze(t){var e=(t||{}).withUnload;for(var n in We)Qe(n,{withUnload:e})}E(function t(){clearTimeout(Je);try{ze()}catch(t){}finally{Re()===vt?Je=E(t,Ve):clearTimeout(Je)}},100);var He="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ge=oe(),Ze=location,Ye=document,tn=Ye.domain,en=navigator,nn=en.userAgent.toString(),rn=void 0,an=Array.prototype,on=Object.prototype,cn=decodeURIComponent,un=encodeURIComponent,sn=gn(),fn=on.toString,ln=on.hasOwnProperty,dn="&\";/(=')564XEqc$D7PBYZ>W_:owNi^~0R*.yQp+hs<G|OjzFmH@MAK3JV[\\]SUL9b?C1fIa`Tl,xnv%erktugd8!-{#}2";function vn(){}function pn(t){return void 0===t?"undefined":He(t)}function hn(t,e){return pn(t)===e}function gn(){return+new Date}function mn(){return Math.random()}function _n(t){return hn(t,"number")}function yn(t,e){var n=t.toString().replace(/[^(0-9)|\.]/gi,""),r=n.indexOf(".");return-1===r?n:n.substring(0,r+1+e)}var wn={};function bn(t,n,r){var i=void 0,a=!0===t;return a||(r=n,n=t),n&&wn.isObj(n)||(n={}),r&&wn.isObj(r)||(r={}),Sn.each(r,function(t,e){a&&wn.isObj(r[e])?(i=n[e],n[e]=wn.isObj(i)?i:{},bn(a,n[e],r[e])):n[e]=r[e]}),n}wn.trim=function(t){return t.replace(/^[\s\uFEFF\xA0\u3000]+|[\s\uFEFF\xA0\u3000]+$/g,"")},wn.now=gn,wn.rnd=mn,wn.hasOwn=function(t,e){return ln.call(t,e)};var xn=function(t){return t&&"[object Object]"===fn.call(t)};wn.isObj=xn;var kn=function(t){return hn(t,"string")};wn.isStr=kn,wn.isFunc=function(t){return hn(t,"function")},wn.attr=function(t,e){return t.getAttribute(e)},wn.parseQuery=function(t){var i={};if(t){var e=t.replace(C,function(t,e,n,r){return r||""}).split("&");return Sn.each(e,function(t){var e=t.split("="),n=e[0],r=e.slice(1).join("")||"";if(n&&!ln.call(i,n))try{i[n]=cn(r)}catch(t){}}),i}},wn.stringifyQuery=function(t){var r=[];return wn.isObj(t)&&Sn.each(t,function(t,e){var n;wn.isFunc(t)||(rn!==t&&((n=t)||!hn(n,"object"))||(t=t||""),r.push(un(e)+"="+un(t)))}),r.join("&")},wn.genReqId=function(){return""+1e3*gn()+parseInt(1e3*mn())},wn.run=function(t,e){On(t)?Sn.each(t,e):e(t)},wn.on=function(t,e,n){t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent&&t.attachEvent("on"+e,n)},wn.off=function(t,e,n){t.removeEventListener?t.removeEventListener(e,n,!1):t.detachEvent&&t.detachEvent("on"+e,n)};var Sn={isArray:function(t){return"[object Array]"===fn.call(t)}},On=function(t){if(!t)return!1;var e=t.length;return!!Sn.isArray(t)||!!(t&&_n(e)&&0<=e)&&(!wn.isObj(t)||(!(1<e)||e-1 in t))};Sn.isArrayLike=On,Sn.find=function(n,r,i){var a=void 0;return On(n)&&Sn.each(n,function(t,e){if(!0===r.call(i,t,e,n))return a=t,!1}),a},Sn.filter=function(n,r,i){var a=[];return On(n)&&Sn.each(n,function(t,e){r.call(i,t,e,n)&&a.push(t)}),a},Sn.toArray=function(t,e,n){var r=[];return On(t)&&Sn.each(t,function(t){r.push(e?e.call(n,t):t)},n),r};var jn=function(t,e,n){if(t){var r=void 0,i=void 0,a=void 0;if(On(t))for(i=0,a=t.length;i<a&&!1!==e.call(n,t[i],i,t);i++);else for(r in t)if(wn.hasOwn(t,r)&&!1===e.call(n,t[r],r,t))break}};Sn.each=jn;var An=function(t,e,n){if(t){for(var r=[],i=0,a=t.length;i<a;i++){var o=e.call(n,t[i],i,t);r.push(o)}return r}};Sn.slice=function(t,e,n){return an.slice.call(Sn.toArray(t),e,n)},Sn.reduce=function(t,e){if(On(t)&&wn.isFunc(e)){var n=t,r=n.length>>>0,i=0,a=void 0,o=arguments;if(3===o.length)a=o[2];else{for(;i<r&&!(i in n);)i++;if(r<=i)return;a=n[i++]}for(;i<r;)i in n&&(a=e(a,n[i],i,n)),i++;return a}};var qn={};function In(t){for(var e="",n=JSON.stringify(t),r=0;r<n.length;r++){var i=n.charAt(r);i.charCodeAt(0)<="~".charCodeAt(0)&&i.charCodeAt(0)>="!".charCodeAt(0)?e+=dn.charAt(i.charCodeAt(0)-"!".charCodeAt(0)):e+=i}return e}function Cn(t){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n=void 0,r=void 0,i=void 0,a=void 0,o=void 0,c=0,u=0,s="",f=[];if(!t)return t;for(t=En(t);n=(o=t.charCodeAt(c++)<<16|t.charCodeAt(c++)<<8|t.charCodeAt(c++))>>18&63,r=o>>12&63,i=o>>6&63,a=63&o,f[u++]=e.charAt(n)+e.charAt(r)+e.charAt(i)+e.charAt(a),c<t.length;);switch(s=f.join(""),t.length%3){case 1:s=s.slice(0,-2)+"==";break;case 2:s=s.slice(0,-1)+"="}return s}function En(t){var e,n="",r=void 0,i=void 0,a=void 0;for(r=i=0,e=(t=(t+"").replace(/\r\n/g,"\n").replace(/\r/g,"\n")).length,a=0;a<e;a++){var o=t.charCodeAt(a),c=null;o<128?i++:c=127<o&&o<2048?String.fromCharCode(o>>6|192,63&o|128):String.fromCharCode(o>>12|224,o>>6&63|128,63&o|128),null!==c&&(r<i&&(n+=t.substring(r,i)),n+=c,r=i=a+1)}return r<i&&(n+=t.substring(r,t.length)),n}qn.del=function(t,e){var n=t+"=;path=/;domain="+e,r=new Date;return r.setFullYear(1970),n+=";expires="+r.toUTCString(),Ye.cookie=n,!0},qn.get=function(t){var e=Ye.cookie.match(new RegExp("(?:^|;)\\s*"+t+"=([^;]+)"));return cn(e?e[1]:"")},qn.set=function(t,e,n,r){r=r||Ye.domain;var i=void 0,a=void 0,o=void 0,c=t+"="+un(e)+";path=/;domain="+r;rn===n||isNaN(n)||(i=new Date,a=60*parseInt(n,10)*1e3,o=i.getTime()+a,i.setTime(o),c+=";expires="+i.toUTCString());try{return Ye.cookie=c,!0}catch(t){return!1}},qn.top=function(t,e,n){var r=Ye.domain,i=r.split("."),a=i.length,o=a-1,c=void 0,u=!1;for(e=""+e;!u&&0<=o&&(r=i.slice(o,a).join("."),qn.set(t,e,n,r),c=qn.get(t),rn!==c&&(u=c===e),o--,!u););},qn.del=function(t){return qn.top(t,"",-100)};var Tn=window.btoa,Dn=Cn;Oe("btoa",!!window.btoa),Oe("atob",!!window.atob);try{wn.isFunc(Tn)&&Tn(En(nn))===Cn(nn)&&(Dn=function(t){return Tn(En(t))})}catch(t){}var Nn=Dn;function Mn(t,e){var n=void 0,r=Sn.find(t,function(t){return wn.attr(t,"name")===e});return r&&(n=wn.attr(r,"content")),n}function Fn(){var t=Ge[e];return Ge[t]}var Rn,Pn=(Rn=void 0,{update:function(t){Rn=t},get:function(){return Rn}});function Ln(t){var e=t||gn(),n=Fn();Pn.update(e),sn=e,n&&(n.l=e)}function Bn(){var t={duration:function(){var t=void 0,e=Pn.get(),n=gn();if(e)t=e,Pn.update(n);else{var r=Fn(),i=Ge.performance&&Ge.performance.timing;(t=i&&i.requestStart)||(t=r?r.l:sn),Pn.update(n)}return n-t}()},e=void 0,n=_e.quit;return wn.isFunc(n)&&(e=n()||{}),t=bn(t,e||{})}function Vn(t,e){e[ft]}var Un=2032;function Wn(){return Ze.protocol}/trident/i.test(nn)||/msie/i.test(nn)||!/mozilla.+webkit.+chrome.+/i.test(nn)||(Un=6e3);var Jn=0;function Kn(t,e){var n=/^((\d+\.)+\d+).*$/;if("string"!==pn(t)||"string"!==pn(e))return NaN;if(!n.test(t)||!n.test(e))return NaN;for(var r=t.replace(n,"$1").split("."),i=e.replace(n,"$1").split("."),a=0,o=Math.max(r.length,i.length);a<o;a++){if(!r[a]||!i[a])(!r[a]&&r||!i[a]&&i).push("0");var c=r[a].toString().length,u=i[a].toString().length;if(c!==u){var s=u<c?i:r;s[a]=Array(Math.abs(c-u)+1).join("0")+s[a].toString()}}var f=parseInt(r.join("")),l=parseInt(i.join(""));return f==l?0:l<f?1:-1}function $n(n,r,i,a,o,c,u){return function(t){if(ir(ae),_e.autoPD&&!n){n=!0;try{if(r&&new Date-i<50)return;if(a)return;if(a=!1,!u()){var e=Bn();o("pageDisappear",e,{isAuto:6,shouldStore:!0})}ze({withUnload:!0})}catch(t){}c&&c(t)}}}var Qn=4,Xn="",zn=function(t){Qn=t},Hn=function(){return Xn&&3===Qn},Gn=function(t){Xn=t},Zn=function(){return Xn},Yn=-1;var tr=void 0;try{tr=Ge.sessionStorage}catch(t){tr=null}var er=void 0;er=wn.isFunc(Ge.atob)?Ge.atob:function(t){return t};var nr={},rr=function(t,e){var n=e||"fn_"+parseInt(1e6*mn());return nr[n]=t,n},ir=function(t,e){if(nr[t])try{nr[t](e),E(function(){delete nr[t]},0)}catch(t){}},ar=nn,or=[{n:u,r:/lingxi\/demo\/\d+/i,v:ar},{n:r,r:/dp\/com\.dianping\.[\w.]+\/([\d.]+)/i,v:ar},{n:h,r:/\bmeituanwaimai-c\/\d+\./i,v:ar},{n:"moviepro",r:/\bmoviepro/i,v:ar},{n:"movie",r:/\bmaoyan\b/i,v:ar},{n:g,r:/\bmeituan \d+|meituangroup\/\d+\./i,v:ar}],cr=/android/i.test(ar),ur="",sr=cr,fr=!1,lr=!1,dr="www",vr=!1;if(/\bandroid|mobile\b|\bhtc\b/i.test(ar)){dr="i",sr=!0,Sn.each(or,function(t){if(t.r.test(t.v))return ur=t.n,!1}),/\btitans(no){0,1}x\b/i.test(ar)&&(fr=!0);var pr=/iphone/i.test(ar),hr=/ipad/i.test(ar);(pr||hr)&&(lr=!0),ur&&(pr?dr="iphone":/android/i.test(ar)?dr="android":hr&&(dr="ipad"))}else{var gr=ar.match(/(msie) (\d+)|Trident\/(d+)/i);gr&&(vr=!0,gr&&parseInt(gr[2],10))}var mr,_r,yr,wr,br=Ge.screen.width+"*"+Ge.screen.height,xr=!/Chrome/.test(ar)&&!vr&&/Mozilla.+AppleWebKit.+Version.+Safari.+/.test(ar),kr=/firefox/i.test(ar),Sr=nn.replace(/^.*Titans(No)?X\/([\w.]+)\s.*$/i,"$2"),Or=!(!sr||!/\sMMP\//.test(ar)),jr=!(!/\sMicroMessenger/.test(ar)||Or),Ar=fr||/ knb\/\d+/i.test(nn),qr=function(){return sr&&Ar&&!jr&&!Or},Ir=Ge.JSON;Ir||(Ir={parse:function(t){return new Function("return ("+t+")")()},stringify:(mr=Sn.isArray,_r={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t"},yr=function(t){return _r[t]||"\\u"+(t.charCodeAt(0)+65536).toString(16).substr(1)},wr=/[\\"\u0000-\u001F\u2028\u2029]/g,function t(e){if(null==e)return"null";if(hn(e,"number"))return isFinite(e)?e.toString():"null";if(hn(e,"boolean"))return e.toString();if(hn(e,"object")){if("function"===pn(e.toJSON))return t(e.toJSON());if(mr(e)){for(var n="[",r=0;r<e.length;r++)n+=(r?", ":"")+t(e[r]);return n+"]"}if(wn.isObj(e)){var i=[];for(var a in e)e.hasOwnProperty(a)&&i.push(t(a)+": "+t(e[a]));return"{"+i.join(", ")+"}"}}return'"'+e.toString().replace(wr,yr)+'"'})});var Cr=Ir;function Er(t){return t}function Tr(t){try{t(Pr(this,Nr),Pr(this,Dr))}catch(t){if(this._state===Mr)return Br(new Tr(Er),Dr,t)}}Tr.prototype.then=function(t,e){return function(t,e,n,r){pn(n)===Fr&&(e._onFulfilled=n);pn(r)===Fr&&(e._onRejected=r);t._state===Mr?t[t._pCount++]=e:Lr(t,e);return e}(this,new Tr(Er),t,e)},Tr.all=function(d){return new Tr(function(r,n){for(var t,e,i,a=0,o=d.length,c=[],u=0,s=void 0,f=function(n){return function(t){if(n.value=t,n.state=Nr,++u===n.len&&!s){var e=function(t){var e=[];for(a=0;a<o;a++)e.push(t[a]?t[a].value:void 0);return e}(c);r(e)}}},l=function(e){return function(t){e.value=t,e.state=Dr,u++,s||(s=!0,n(t))}};a<o;a++)e=t=void 0,e=d[a],i={value:null,index:a,state:null,len:o},c.push(i),t=i,e.then?e.then(f(t),l(t)):Tr.resolve(e).then(f(t),l(t))})},Tr.resolve=function(e){if(e instanceof Tr)return e;if(wn.isFunc(e.then)){var n=e.then.bind(e);return new Tr(function(t,e){n(t,e)})}return new Tr(function(t){t(e)})},Tr.reject=function(n){return new Tr(function(t,e){e(n)})};var Dr=0,Nr=1,Mr=2,Fr="function",Rr="object";function Pr(e,n){return function(t){return Br(e,n,t)}}function Lr(n,r){return setTimeout(function(){var t=void 0,e=n._state?r._onFulfilled:r._onRejected;if(void 0!==e){try{t=e(n._value)}catch(t){return void Br(r,Dr,t)}Vr(r,t)}else Br(r,n._state,n._value)})}function Br(t,e,n){if(t._state===Mr){t._state=e,t._value=n;for(var r=0,i=t._pCount;r<i;)Lr(t,t[r++]);return t}}function Vr(e,t){if(t!==e||!t){var n=void 0,r=pn(t);if(null===t||r!==Fr&&r!==Rr)Br(e,Nr,t);else{try{n=t.then}catch(t){return void Br(e,Dr,t)}pn(n)===Fr?function(e,n,t){try{t.call(n,function(t){n&&(n=null,Vr(e,t))},function(t){n&&(n=null,Br(e,Dr,t))})}catch(t){n&&(Br(e,Dr,t),n=null)}}(e,t,n):Br(e,Nr,t)}return e}Br(e,Dr,new Error("promise_circular_chain"))}Tr.prototype._state=Mr,Tr.prototype._pCount=0;var Ur,Wr=!xr&&!vr&&Ge.indexedDB,Jr=Ge.IDBFactory,Kr=Wr&&wn.isFunc(Wr.open)&&Wr.constructor===Jr,$r=!1,Qr=void 0,Xr=void 0,zr=void 0,Hr=60*(parseInt(_e.cacheRetryMinutes)||5),Gr=!1,Zr=0;function Yr(){return new Tr(function(e,n){if(fr||kr)return n();if(!Kr)return n();if($r)return e();try{(Qr=Wr.open("_lxsdk_db",1e3)).onsuccess=function(t){$r=!0,Xr=t.target.result,e()},Qr.onupgradeneeded=function(t){Xr=t.target.result,(zr=Xr.createObjectStore("cache",{keyPath:"id",autoIncrement:!0})).createIndex("evs","evs",{unique:!1}),zr.createIndex("type","type",{unique:!1})}}catch(t){$r=!1,n()}})}function ti(){Yr().then(function(){var n=Xr.transaction(["cache"],"readwrite").objectStore("cache"),t=n.openCursor(),r=[];t.onsuccess=function(t){var e=t.target.result;e?(r.push(e.value),e.continue()):(Zr=r.length,r.forEach(function(t){!function(t){if("get"===t.type){var e=document.createElement("img"),n=Math.random();e.src="//"+te+"/?d="+Nn("["+t.evs+"]")+"&t=1&r="+n+"&_lxsdk_rnd="+n,e.id=n,window["img_"+n]=e}else try{window.navigator.sendBeacon("//"+Yt,JSON.stringify(t))}catch(t){}}(t),n.delete(t.id)}))}})}Yr();var ei={add:function(t,n){Yr().then(function(){try{var e=Xr.transaction(["cache"],"readwrite").objectStore("cache");100<Zr&&e.clear(),t.forEach(function(t){t.evs.forEach(function(t){t[at]=t[at]||{},t[at].fc=1}),e.add({type:n,evs:JSON.stringify(t)})})}catch(t){Di(location.href,"lx-func-indexedDB",t.stack||t.message,2)}})},check:ti,startPoll:function(){!Gr&&Kr&&(Gr=!0,Ur=+new Date,Yr().then(function(){setTimeout(function t(){var e="_lxsdk_rc_img",n=Ge[e]=new Image;n.onload=function(){ti(),Gr=!1,Ge[e]=null},n.onabort=n.onerror=function(){+new Date-Ur>1e3*Hr||(setTimeout(t,6e3),Ge[e]=null)},n.src="//"+te+"/?r="+Math.random()},6e3)}))}},ni="__lxsdk_",ri=void 0;try{ri=Ge.localStorage}catch(t){ri=null}function ii(t){return ni+t}function ai(){return{length:0,_data:{},setItem:function(t,e){return this.length++,this._data[t]=String(e)},getItem:function(t){return this._data.hasOwnProperty(t)?this._data[t]:rn},removeItem:function(t){return this.length--,delete this._data[t]},clear:function(){return this.length=0,this._data={}},key:function(t){var e=[],n=this._data;return Sn.each(n,function(t){wn.hasOwn(n,t)&&e.push(t)}),e[t]}}}var oi={get:function(t){try{t=ii(t);var e=ri.getItem(t);return e=rn!==e?Cr.parse(e):e}catch(t){Di(location.href,"lx-func-getLocalStorage-error",t.stack||t.message,2,1)}},set:function(t,e){oi.del(t);try{return ri.setItem(ii(t),Cr.stringify(e))}catch(t){Di(location.href,"lx-func-setLocalStorage-error",t.stack||t.message,2,1)}},keys:function(){for(var t=[],e=void 0,n=0;n<ri.length;n++)0===(e=ri.key(n)).indexOf(ni)&&t.push(e.replace(ni,""));return t},del:function(t){try{return ri.removeItem(ii(t))}catch(t){Di(location.href,"lx-func-delLocalStorage-error",t.stack||t.message,2,1)}},clear:function(){for(var t=this.keys(),e=0;e<t.length;e++)this.del(t[e])}};if(ri){if(ri){var ci="___lxtest";oi.nt=!0;try{oi.set(ci,1),1!==oi.get(ci)?oi.clear():oi.del(ci)}catch(t){try{oi.clear(),ri.setItem(ci,1),ri.removeItem(ci)}catch(t){ri=ai(),oi.nt=!1}}}}else ri=ai(),oi.nt=!1;var ui,si=void 0,fi=(ui=function(){for(var t=1*new Date,e=0;t===1*new Date&&e<200;)e++;return t.toString(16)+e.toString(16)},function(){var t=(screen.height*screen.width).toString(16);return ui()+"-"+Math.random().toString(16).replace(".","")+"-"+function(){var t=ar,e=void 0,n=void 0,i=[],r=0;function a(t,e){var n=void 0,r=0;for(n=0;n<e.length;n++)r|=i[n]<<8*n;return t^r}for(e=0;e<t.length;e++)n=t.charCodeAt(e),i.unshift(255&n),4<=i.length&&(r=a(r,i),i=[]);return 0<i.length&&(r=a(r,i)),r.toString(16)}()+"-"+t+"-"+ui()});function li(){var t={mem:si,cookie:qn.get(xt),ls:oi.get(xt),ss:tr&&tr.getItem(xt)},e=void 0;for(var n in t)t[n]&&(e=t[n]);for(var r in e||(e=fi()),t)if(!t[r])switch(r){case"mem":si=e;break;case"cookie":qn.top(xt,e,_t);break;case"ls":try{oi.set(xt,e)}catch(t){Di(location.href,"lx-func-setlocalStorage-lxid-error",t.stack||t.message,2,1)}break;case"ss":try{tr&&tr.setItem(xt,e)}catch(t){Di(location.href,"lx-func-setSessionStorage-lxid-error",t.stack||t.message,2,1)}}return e}var di=3,vi=150,pi=5e3,hi=3500,gi=!1,mi=[],_i=[],yi=0,wi=[],bi=[],xi=void 0,ki=0,Si=!_e.use_post,Oi=!0,ji=5e3,Ai=12,qi=!0,Ii=cr&&/baiduboxapp\//.test(ar)||/Mozilla.+AppleWebKit.+Chrome.+Safari.+/i.test(ar)&&!sr,Ci=!vr&&wn.isFunc(en.sendBeacon),Ei=[{key:"mac",type:1},{key:"imei",type:2},{key:"imei2",type:2},{key:"did",type:2},{key:"imsi",type:3},{key:"lat",type:4},{key:"latitude",type:4},{key:"lng",type:5},{key:"longitude",type:5},{key:"android_id",type:6},{key:"idfa",type:7},{key:"idfv",type:8},{key:"meid",type:9},{key:"ssid",type:10},{key:"bssid",type:10}],Ti=[{key:"_lat",type:4},{key:"_latitude",type:4},{key:"_lng",type:5},{key:"_longitude",type:5}];function Di(t,e,n,r,i){if(!(0<=nn.indexOf("Mozilla/5.0 (Windows NT 6.1; WOW64; rv:43.0) Gecko/20100101 Firefox/43.0"))){var a=li(),o=[{project:"com.sankuai.analytics.web4new",pageUrl:Ze.href,resourceUrl:t,category:["jsError","ajaxError","customError"][r]||"jsError",sec_category:"prod_"+e,level:["error","warn","info"][i]||"error",unionId:a,timestamp:wn.now(),content:""+n||""}],c=Wi("//catfront.dianping.com/api/log?v=1",Ht,"application/x-www-form-urlencoded");c&&(c.onerror=c.onreadystatechange=function(){},c.send("c="+encodeURIComponent(Cr.stringify(o))))}}function Ni(){if(!(0<=nn.indexOf("Mozilla/5.0 (Windows NT 6.1; WOW64; rv:43.0) Gecko/20100101 Firefox/43.0")||(t=1e5,Math.ceil(Math.random()*t)!==t))){var t,e={kvs:{initTimes:[1]},tags:{},ts:parseInt((new Date).getTime()/1e3)},n=Wi("https://catfront.dianping.com/api/metric?p=com.sankuai.analytics.web4new&v=1",Ht,"application/x-www-form-urlencoded");n&&(n.onerror=n.onreadystatechange=function(){},n.send("data="+encodeURIComponent(Cr.stringify(e))))}}function Mi(){var t,r,e,i,a;t=B,r=function(t,e){t===U&&(Oi=e.lx_encry_switch,ji=e.lx_max_req_len,Ai=e.lx_max_req_num,qi=e.lx_split_req_switch)},e=-1<["staging","prod"].indexOf("prod"),i=Wi(["//portal-portm.meituan.com/horn/v1/modules",t,e?"prod":"test"].join("/"),Gt,"text/plain"),a=!1,i.onreadystatechange=function(){if(4===i.readyState){var t=i.status,e="",n=void 0;if(200<=t&&t<400)e=Cr.parse(i.responseText),n=ne;else{if(a)return;a=!0,n=re}wn.isFunc(r)&&r(n,e),i.onreadystatechange=null}},i.onerror=function(){a||(a=!0,wn.isFunc(r)&&r(W))},i.send()}function Fi(){if(xi){var t=bi.concat([]);clearTimeout(xi),wi.length&&Pi(function(e){try{var i=[],a=void 0;return jn(e,function(t){var e=t.evs;delete t.evs;var n=Cr.stringify(t);if(n===a){var r=i.length-1;i[r].evs=(i[r].evs||[]).concat(e)}else t.evs=e,i.push(t),a=n}),i}catch(t){return Di(Ze.href,"lx-func-combineEvs",t.stack||t.message,2,1),e}}(wi),{cb:function(){var e=arguments;Sn.each(t,function(t){t.apply(rn,e)})}}),xi=null,wi=[],bi=[]}}function Ri(t,m){var e=bn(!0,{},t);return function v(p,h){var g=[];jn(p,function(t,e){var n=bn(!0,{},p),r=e.toLowerCase();n.level=h;var i,a,o=(i=r,a=0,jn(Ei,function(t){t.key===i&&(a=t.type)}),a);o&&(g.push(o),p.hit_3=g,delete p[e]);var c,u,s=(c=r,u=0,jn(Ti,function(t){-1<c.indexOf(t.key)&&(u=t.type)}),u);if(s&&(g.push(s),p.hit_3=g,delete p[e]),_e.geo&&/[\d|\.]*$/.test(t)&&p[r]){var f=yn(_e.geo.lat,3),l=yn(_e.geo.lng,3),d=yn(t,3);f===d?(g.push(4),p.hit_3=g,delete p[e]):l===d&&(g.push(5),p.hit_3=g,delete p[e])}xn(t)&&n.level<m&&v(t,n.level+1)})}(e,1),e}function Pi(t,r){if(di<=ki)return!1;r=bn({cb:vn},r||{});var e=Ce();Si=!xr&&!_e.use_post;var i=[];jn(t,function(t){var e=bn(!0,{},t),n=[];jn(t.evs,function(i){i=bn(!0,{},i),jn(i,function(t,e){if("val_lab"===e){var n=Ri(i[e],3);i.val_lab=n}if("tag"===e){var r=Ri(i[e],4);i.tag=r}}),n.push(i)}),!Si||r.useBeacon&&Ci?Oi?(e.evs=In(n),e.lx_dict="true"):(e.evs=n,e.lx_dict="false"):e.evs=n,i.push(e)});try{r.useBeacon&&Ci?Li(e,i):Si?function(n,t){var r=(t=t||{}).cb,e=gn().toString(16)+yi++,i=Ce(),a=!1,o=!1,c=void 0,u=(s=n,f=[],l=[{l:Ft,s:Rt},{l:qt,s:It},{l:Ct,s:Et},{l:Tt,s:Dt},{l:Pt,s:Lt},{l:Nt,s:Mt}],Sn.each(s,function(t){var e=bn(!0,{},t);Sn.each(l,function(t){Ji(e,t.l,t.s)});var r=[];Sn.each(t.evs,function(n){n=bn(!0,{},n),Sn.each(n,function(t,e){-1<e.indexOf("val_")&&(n[e.replace("val_","")]=n[e],delete n[e]),Ji(n,"refer_url","urlr")}),r.push(n)}),e.evs=r,e[Lt]===e.uuid&&delete e.uuid;var n=e[Et];n&&(e[Et]=n.replace("data_sdk_","")),delete e.ua,f.push(e)}),f);var s,f,l;if(Sn.each(u,function(t){t.uuid||t.lxid,delete t.ua}),!function(t){for(var e=t.length,n=e,r=0;r<e;r++)127<t.charCodeAt(r)&&n++;return 1.5*n<Un}(c=Cr.stringify(u))){var d=[],v=Cr.stringify(n).length;if(fr&&qi)if(ji<v){var p=Math.ceil((v/ji).toFixed(1));Sn.each(n,function(n){var t=n.evs.length;Ai<p&&(p=Ai);var e=Math.ceil(t/p);if(0<e&&1<t){var r=function(t,e){for(var n=[],r=0;r<t.length;r+=e)n.push(t.slice(r,r+e));return n}(n.evs,e);Sn.each(r,function(t){var e=bn({},n);e.evs=t,d.push(e)})}else d.push(n)})}else d=d.concat(n);else d=d.concat(n);return Sn.each(d,function(t){if(Sn.each(t.evs,function(t){var e=t.val_lab;t.val_lab=bn(!0,{custom:{_s:1}},e||{})}),Oi)try{t.evs=In(t.evs),t.lx_dict="true"}catch(t){Di(location.href,"lx-func-dictionaryEncrypt-error",t.stack||t.message,2)}else t.lx_dict="false"}),Sn.each(d,function(n){Vi(i,[n],{cb:function(t,e){try{r(t,e,"ajax-post")}catch(t){}t!==U&&(!a&&Ci&&(a=!0,Li(i,[n])),o||(o=!0,Di(location.host+location.pathname,"lx-request-post-error",c,1)))}})})}var h=Nn(c),g=un(h),m=De(!0);m+=-1<m.indexOf("?")?"&d="+g:"?d="+g,g.length,m=m+"&t=1&r="+e,Ii?Vi(m,null,{method:"get",cb:function(t,e){try{r(t,e,"ajax-get")}catch(t){}t!==U&&(!a&&Ci&&(a=!0,Li(i,n),ei.add(u,"get"),ei.startPoll()),o||(o=!0,Di(m,"lx-request-get-error",c,1)))}}):function t(e,n,r){var i=void 0,a=Qt+Jn++;if(n=n||{},!(2<(r=r||0)))return Ge[a]=i=new Image,i.onload=function(){wn.isFunc(n.cb)&&n.cb(!0),Ge[a]=null},i.onabort=i.onerror=function(){Ge[a]=null,E(function(){t(e,n,++r)},100)},i.src=e,i;wn.isFunc(n.cb)&&n.cb(!1)}(m,{cb:function(t){if(t)try{r(U,200,"image-get")}catch(t){}else{try{r(re,0,"ajax-get-to-image-get")}catch(t){}!a&&Ci&&(a=!0,Li(i,n),ei.add(u,"get"),ei.startPoll()),o||(o=!0,Di(location.host+location.pathname,"lx-request-image-error",m,1,0))}}})}(i,r):Vi(e,i,r)||vr&&Bi(e,i,r)||Li(e,i)&&r.cb(U)}catch(t){return Di(location.href,"lx-request-fail",t.stack||t.message,0),!1}return!0}function Li(t,e){var n=en.sendBeacon;return!!n&&(t=Ui(t),n&&n.call(en,t,Cr.stringify(e)))}function Bi(t,e,n,r){if(!Ge.XDomainRequest)return!1;try{var i=new XDomainRequest;return i.open(Ht,Ui(t),!0),i.onload=function(){ki=0,n&&n.cb(U,200,"IEXDR-post"),mi=[]},i.onerror=function(){ki++,n&&n.cb(W,0,"IEXDR-post")},i.ontimeout=function(){ki++,r||(!function(t,e,n,r){mi=mi.concat(e);var i=void 0,a=Sn.reduce(mi,function(t,e){return e.evs=t.evs.concat(e.evs),i=e.evs.length,vi<i&&Sn.slice(e.evs,i-vi,i),e});if(mi=[a],_i.push(r),!gi)var o=setInterval(function(){if(di<=ki)return clearInterval(o),!1;n(t,mi,function(e){clearInterval(o),gi=!1,Sn.each(_i,function(t){t&&t(e)})},!0)},hi)}(t,e,Bi,n),gi=!0)},i.timeout=pi,i.send(Cr.stringify(e)),!0}catch(t){return!1}}function Vi(e,n,r,i){if(!fe())return!1;try{var a=r&&r.method||Ht,o=wn.isFunc(r.cb)&&r.cb||ie,c=Wi(e,a,"text/plain");return c.onreadystatechange=function(){if(4===c.readyState){var t=c.status;200<=t&&t<400?(ki=0,o(U,c.status,"ajax-"+a),mi=[]):i?o(J,c.status,"ajax-"+a):Vi(e,n,r,!0),c.onreadystatechange=null}},c.onerror=function(){o(W,c.status,"ajax-"+a)},c.send(a===Ht&&Cr.stringify(n)||null),!0}catch(t){return Di(e,"runtime",t.stack||t.message,1),!1}}function Ui(t){var e="_lxsdk_rnd="+(gn().toString(16)+yi);return-1===t.indexOf("?")?t+"?"+e:t+"&"+e}function Wi(t,e,n){var r=new(ce());return r.open(e||Ht,Ui(t),!0),r.timeout=pi,r.setRequestHeader("Content-Type",n),r}function Ji(t,e,n){return ln.call(t,e)&&t[e]&&(t[n]=t[e],delete t[e]),t}rr(Fi,"pageDisappear"),rr(function(){!0,Fi()},ae);var Ki="performance",$i="getEntries",Qi="pvid-"+parseInt(1e7*wn.rnd())+"-"+parseInt(1e7*wn.rnd());if(Ge&&Ge[Ki]&&Ge[Ki][$i]&&wn.isFunc(Ge[Ki][$i])&&/\[native code\]/.test(Ge[Ki][$i].toString())){var Xi=Ge[Ki][$i]();jn(Xi,function(t){try{t&&"script"===t.initiatorType&&/(lx|analytics)\.meituan\.net/.test(t.name)&&(Oe("stime",t.duration||t.responseEnd-t.startTime),Oe("pvid",Qi))}catch(t){Di(Ze.href,"lx-func-performance",Qi,t.stack||t.message,2)}})}var zi=q+"_source",Hi=q+"_medium",Gi=q+"_term",Zi=q+"_campaign",Yi=q+"_content",ta=void 0,ea=!1;function na(t){if(!t)return rn;var n=rn,r=/^utm_(source|medium|term|content|campaign)$/;return Sn.each(t,function(t,e){r.test(e)&&(!n&&(n={}),n[e]=t)}),n}function ra(t){if(t){ta=t;var e=wn.stringifyQuery(t);return qn.del(wt,tn),qn.top(wt,e,mt,tn),!0}return!1}function ia(t,e){var a,n,r,i,o;return(!ta&&!ea||t)&&(t=t||Ze.href,e=e||Ye.referrer,o=t,(ta=na(wn.parseQuery(o))||function(t){var e=rn,n=t.match(/^[\w-]+:\/\/([^/]+)(?:\/([^?]+)?)?/),o=n&&n[1];if(o){var c=wn.parseQuery(t),r="daum:q eniro:search_word naver:query pchome:q images.google:q google:q yahoo:p msn:q bing:q aol:query aol:q lycos:q lycos:query ask:q cnn:query virgilio:qs baidu:wd baidu:word alice:qs yandex:text najdi:q seznam:q rakuten:qt biglobe:q goo.ne:MT search.smt.docomo:MT onet:qt onet:q kvasir:q terra:query rambler:query conduit:q babylon:q search-results:q avg:q comcast:q incredimail:q startsiden:q go.mail.ru:q centrum.cz:q 360.cn:q sogou:query tut.by:query globo:q ukr:q so.com:q haosou.com:q auone:q m.baidu:word wap.baidu:word baidu:word Baidu:bs www.soso:w wap.soso:key www.sogou:query wap.sogou:keyword m.so:q m.sogou:keyword so.com:pq youdao:q sm.cn:q sm.cn:keyword haosou:q".split(" "),u="",s="";Sn.each(r,function(t){var e=t.split(":"),n=e[0],r=e[1],i=c[r],a=-1<n.indexOf(".")?n:"."+n+".";if(-1<o.indexOf(a.toLowerCase())&&(s=n,u=i))return!1}),s&&((e={})[zi]=s,e[Hi]="organic",u&&(e[Gi]=u))}return e}(e))?ra(ta):(i=qn.get(wt),ta=C.test(i)?na(wn.isStr(i)?wn.parseQuery(i):null):ta),ta||(a=void 0,n=qn.get("__utmz"),(r=n&&n.match(/(utmc(tr|sr|cn|md|ct))=([^|()]+)/g))&&Sn.each(r,function(t){var e=t.split("="),n=e[0],r=void 0,i=e[1]||"";"utmcsr"===n?r=zi:"utmccn"===n?r=Zi:"utmcmd"===n?r=Hi:"utmcct"===n?r=Yi:"utmctr"===n&&(r=Gi),r&&((a=a||{})[r]=i)}),ra(ta=a)),ea=c),ta}var aa="tag",oa=18e5;function ca(t,e,n,r,i,a){var o={};o.c=t,o.k=e,o.v=n,o.t=r||+new Date,o.u=i||"",o.r=a||"",this.toJSON=function(){return bn(!0,{},o)}}var ua={set:function(t,e,n){var r=void 0,i=[],a=oi.get(aa)||[];if(!wn.isStr(e)||""===e)return!1;for(var o=0,c=a.length;o<c;o++)sa(r=a[o])||(t===r.c?e!==r.k&&i.push(r):i.push(r));return r=new ca(t,e,n,+new Date),i.push(r.toJSON()),oi.set(aa,i),!0},get:function(t,e){var n=void 0,r=oi.get(aa);if(r&&r.length)return n={},Sn.each(r,function(t){var e={};e[t.k]=t.v,sa(t)||(n[t.c]=bn(!0,n[t.c]||{},e))}),t&&e?n[t]&&n[t][e]:t?n[t]:n},getAll:function(t){var e=oi.get(aa),n=ke()||oi.get(Xt),r={},i=void 0;return!t&&n&&(r=bn(i=!0,r,n)),Sn.each(e,function(t){var e=void 0;!sa(t)&&t.v&&(i=!0,(e={})[t.k]=t.v,xn(e[t.k])&&(e[t.k].lx_tag_tm=t.t),r[t.c]=bn(!0,r[t.c],e))}),i&&r},clear:function(e,n){if(oi.set(Xt,[]),xe={},!e)return oi.set(aa,[]);if(wn.isStr(e)){var t=oi.get(aa),r=[];Sn.each(t,function(t){(n!==rn&&t.k!==n||e!==t.c)&&r.push(t)}),oi.set(aa,r)}}};function sa(t){var e=wn.now();return oa<e-t.t}var fa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},la=function(){var t=!("undefined"==typeof window||!window.navigator||!window.navigator.userAgent);function r(){return t?navigator.userAgent.toLowerCase():""}function a(t){for(var e={},n=t.replace(/\([^)]+\)/g,"").split(/\s+/),r="",i=0;i<n.length;i+=1){var a=n[i],o=a.lastIndexOf("/");if(o<0)r=a;else{var c=a.slice(0,o);r&&(c=r+" "+c,r=""),e[c]=a.slice(o-a.length+1)}}return e}function u(t){var e=t||"0",n=e.match(/^(\d*)/);return n?Number(n[1]):0}function o(t,e){for(var n="string"==typeof t?t.split("."):["0"],r="string"==typeof e?e.split("."):["0"],i=Math.max(n.length,r.length),a=0;a<i;a+=1){var o=u(n[a]),c=u(r[a]);if(c<o)return 1;if(o<c)return-1}return 0}function c(t){var e=-1,n=document.createElement("iframe");function r(){if(clearTimeout(e),n){var t=n.parentNode;t&&t.removeChild(n),n.onload=null,n.onerror=null,n=null}}n.style.display="none",n.onload=r,n.onerror=r,n.src=t,document.documentElement.appendChild(n),e=setTimeout(r,3e3)}function s(t,e,n,r){try{window.webkit.messageHandlers.titans.postMessage({method:e,args:n,callbackId:r})}catch(error){c(t)}}function f(t){if(window.KNBTitansX&&window.KNBTitansX.sendMessage)window.KNBTitansX.sendMessage(t);else{if(10240<t.length)throw new Error("too large bridge data");window.prompt(t)}}function l(t){if(10240<t.length)throw new Error("too large bridge data");window.prompt(t)}var e,n={getDefaultSender:function(){var i=Function.prototype,t=r(),e=a(t),n=e.titansx||e.titansnox||"0";return/ios|iphone|ipod|ipad/.test(t)?i=0<=o(n,"11.26")?s:c:/android/.test(t)&&(i=0<o(e.android,"4.2.0")?f:l),function(t,e,n){var r="js://_?method="+t+"&callbackId="+n+"&args="+encodeURIComponent(e);i(r,t,e,n)}},compareVersion:o,parseUserAgent:a,canUseSlot:(e=a(r()),0<=o(e.titansx||e.titansnox,"11.13"))},i=n.getDefaultSender,d=n.compareVersion,v=n.parseUserAgent,p=n.canUseSlot,h="function"==typeof Symbol&&"symbol"===fa(Symbol.iterator)?function(t){return void 0===t?"undefined":fa(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":void 0===t?"undefined":fa(t)},g={sender:null};function m(t){return"DPApp_callback_"+t}function _(t,e){var n=m(t),r=window[n];r&&(r(e),r.isSafeDelete&&(window[n]=void 0))}function y(t){var e=t||"DPApp";if(!window[e]||!window[e].KNBCore){var n={dequeue:window[e]&&window[e].dequeue||Function.prototype,KNBCore:!0,callback:_};window[e]=function(t,e){if(t&&"object"===(void 0===t?"undefined":h(t))){var n=t;return Object.keys(e).forEach(function(t){n[t]=e[t]}),n}return e}(window[e],n)}}var w,b={bindSender:function(t){"function"==typeof t&&(g.sender=t)},sendMessage:function(t,e,n,r,i){var a=p&&r?"KNBSlot"+r:void 0;y(a);var o=function(t){if(!/^[a-zA-Z0-9]*$/.test(t))throw new Error("illegal slot name");if("undefined"==typeof window)throw new Error("[KNB-Core Error] window is not defined");if(window.__TITANS_COUNT=window.__TITANS_COUNT||1,"number"!=typeof window.__TITANS_COUNT)throw new Error("[KNB-Core Error] __TITANS_COUNT invalid!");return++window.__TITANS_COUNT+(t?"_"+t:"")}(a),c=m(o),u=n||{},s=setTimeout(function(){"function"==typeof window[c]&&window[c]({status:"timeout"})},i||2e3);if(window[c]=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};clearTimeout(s);var e=t.status,n="action"===e?"handle":e;"0"===String(n)&&(n="success"),"handle"!==n&&"success"!==n&&"timeout"!==n&&(n="fail");var r=u[n]||Function.prototype;if("function"==typeof r)return r(t)},u.handle||u.timeout||(window[c].isSafeDelete=!0),g.sender)try{g.sender(t||"",JSON.stringify(e||{}),o)}catch(error){window[c]({status:"fail",errorMsg:error.message,errorCode:error.code||21})}},fireCallback:_,compareVersion:d,parseUserAgent:v};return w=b,"undefined"!=typeof window&&(g.sender=i(),window.KNBCore||(window.KNBCore=w)),b}(),da=!1,va=[],pa=void 0,ha=void 0;function ga(t){qr()?u===ur?t(rn,ha):da?t(pa,ha):(va.push(t),da?t(rn,ha):new Promise(function(t){t({ready:function(t){return t()},use:function(t,e){e=e||{},la.sendMessage(t,{data:e.data||{}},e,"LXAnalyticsSDK")}}),da=!0}).then(function(t){var e,n,r=ha=t;e=pa,n=r,Sn.each(va,function(t){t(e,n)}),va=[]})):t(F,ha)}var ma=500,_a="getUserInfo";function ya(){return new Tr(function(a,r){ga(function(t,e){var n=Ge.DPApp,i=E(function(){a({})},ma);e?e.ready(function(){e.use(_a,{success:function(t){var e,n,r;d(i),a((n={},(r=(e=t)[k])&&"0"!==r||"dp"!==e.type?e[k]&&(n[k]=e[k]):n[k]=e[_],"dp"!==e.type&&e[_]&&(n[_]=e[_]),e.unionId&&(n.unionId=e.unionId),e.userId&&(n.userId=e.userId),n))},fail:function(t){d(i),r({code:N})}})}):n&&n[_a]?n.ready(function(){n[_a]({success:function(t){d(i);var e={};(t.dpid||t.userId)&&(e.dpid=t.dpid,e.userId=t.userId,e.unionId=t.unionId),a(e)},fail:function(t){d(i),r({code:D,res:t})}})}):r({code:D})})})}function wa(){return Math.floor(1+65535*wn.rnd()).toString(16).substring(1)}function ba(){var t=[],e=+new Date;return t.push(e.toString(16)),t.push(wa()),t.push(wa()),t.push(wa()),t.join("-")}function xa(t){var e=t.match(/(\d+)(?:\.(\d+)(?:\.(\d+))?)?/),n=[];if(e)for(var r=1;r<e.length;r++)n.push(parseInt(e[r]||0));return n}function ka(t,e){var n=xa(t),r=xa(e);return!(n[0]<r[0])&&(!(n[0]===r[0]&&n[1]<r[1])&&!(n[0]===r[0]&&n[1]===r[1]&&n[2]<r[2]))}var Sa=100,Oa=!1,ja=void 0,Aa=!1,qa=!1,Ia=!1,Ca=[],Ea=0,Ta=void 0,Da=wn.now();function Na(t){var e=(t._opts||{}).nativeOptions||{};return{cb:"_lx"+(100*wn.now()+Ea++),mn:t._mn,cn:t._cn,data:t._d||{},options:e,ver:4}}function Ma(t,e,n,r,i){i=i||{};var a=this;a._cn=t,a._mn=e,a._d=n,a._cb=r,a._opts=i}function Fa(){return Aa}Ma.prototype.send=function(n){var r=this,i=Na(r),t="statistics://_lx/?data="+un(Cr.stringify(i)),e=wn.now();Ta&&5e3<e-Da&&"getEnv"===r._mn&&Sa===U?(r._mn,n(0,Ta)):(r._mn,i.cb,function(i,a,o){if(ur!==u||!window.JavaScriptBridge)return ga(function(t,e){if(t)return o(t);var n=!1,r=E(function(){n=!0,o(T)},5e3);e.use(i,{data:a,success:function(t){if(d(r),!n)if("success"===t.status){var e=t.data||{};try{wn.isStr(e)&&(e=Cr.parse(e)),o(rn,e.data?e.data:t)}catch(t){o(t)}}else o(M)},fail:function(){d(r),n||o(M)}})});window.JavaScriptBridge.log(a,function(t){var e=t.data;try{wn.isStr(e)&&(e=Cr.parse(e)),o(rn,e.data?e.data:e)}catch(t){o(t)}})}("lxlog",t,function(t,e){t?(r._mn,i.cb,new Date,V(t)):(r._mn,i.cb,new Date),n(t,e)}))},ja=function(t,e,n,r,i){if("setEvs"!==e||function(t,e){var n=!0;kn(t)||(n=!1);var r=e.web_cid,i=e.val_bid,a=e.val_lab;(r&&!kn(r)||i&&!kn(i)||a&&!xn(a))&&(n=!1);return n}(t,n[0])){if(W===Sa||600===Sa)return r(Sa);var a=new Ma(t,e,n,ie,i);if(U===Sa)a.send(function(t,e){r(t,e)});else if(100===Sa){if(Ca.push([a,r]),!Oa){Oa=!0;new Date;new Ma(t,"getEnv",{}).send(function(r,t){if(new Date,r&&V(r),r)Sa=W;else{if(Sa=U,Pe(dt),wn.isStr(t))try{t=Cr.parse(t)}catch(t){}var e=(Ta=t).sdk_ver||"";Aa=ka(e,"4.0.0"),qa=ka(e,"4.3.0"),Ia=!ka(e,"4.8.0")}Sn.each(Ca,function(t){var e=t[0],n=t[1];r?(V(r),n(r)):e.send(function(t,e){n(t,e)})})})}}else r(J)}};var Ra="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pa={},La=pt,Ba=[],Va=null,Ua=!1,Wa={tag:"tag",s:w,l:m,a:S,w:l,lch:"lch",u:{us:t,um:n,uc:i,ucp:o,ut:a},se:Jt,sc:s,v:A,uni:f,di:k,ui:_,wxi:"wxunionid"},Ja=["tag",w,m,S,l,"lch",Jt,s,A,f,k,_,Nt,v,"oneid_mini_program","wi","wf","ji","jf","wxunionid","v"],Ka=[t,n,i,o,a],$a="_lxsdk_wxenv_",Qa=["sdk_ver","ua"];function Xa(t){var e=/(^\w+-\w+-\w+-\w+-\w+)/;if(e.test(t)){var n=t.match(e);qn.top(bt,n[1],_t)}else t&&!/(^\w+\.\d+\.\d+\.\d+\.\d+)/.test(t)&&t.length<100?qn.top(bt,t,_t):qn.top(bt,"",-1)}var za=0,Ha=1,Ga=2,Za="|";function Ya(){var t=Ye.domain;return"sub"===_e.sessionScope?St+"_"+t:St}function to(t){var e=Ya(),n=qn.get(e);return n?n.split(Za)[t]:""}function eo(t,e,n){var r,i,a,o=Ya();qn.top(o,(r=e,i=n,(a=[]).push(t||no()),a.push(r||ro()),a.push(i||io()),a.join(Za)),yt)}function no(){return to(za)}function ro(){return to(Ha)}function io(){var t=0,e=to(Ga);return isNaN(e)||(t=parseInt(e)),t<0?0:t}var ao,oo=void 0,co=(ao="_lxsdk_test",qn.set(ao,"1"),!(-1<Ye.cookie.indexOf(ao)&&(qn.del(ao),1)));function uo(){if(co)return oo=oo||0,++oo;var t=io();return t=t||0,eo(rn,rn,++t),t}function so(t){var e,n={};if(C.test(t)){var r=wn.parseQuery(t);if(r._lx_tag)try{var i=r._lx_tag.replace(/\*/g,"+").replace(/_/,"/").replace(/\./g,"=");e=JSON.parse(function(t){for(var e="",n=0,r=0,i=0,a=0;n<t.length;)(r=t.charCodeAt(n))<128?(e+=String.fromCharCode(r),n++):191<r&&r<224?(a=t.charCodeAt(n+1),e+=String.fromCharCode((31&r)<<6|63&a),n+=2):(a=t.charCodeAt(n+1),i=t.charCodeAt(n+2),e+=String.fromCharCode((15&r)<<12|(63&a)<<6|63&i),n+=3);return e}(er(i))),xe=bn(!0,{},e)}catch(t){}if(r[_]&&(n[_]=r[_]),r[v]&&(n[v]=r[v]),r[x]&&(n[b]=r[x]),r.__lxsdk_params){var a=r._lx_ver,o={};try{if(a){var c=decodeURIComponent(decodeURIComponent(r.__lxsdk_params)),u=er(c.replace(/\*/g,"+").replace(/_/,"/").replace(/\./g,"=")).split(";"),s=void 0;Sn.each(u,function(t){var e=t.split(":"),n=e.shift(),r=e.join(":");if(r)if(0<=Ka.indexOf(n))(s=s||{})[n]=r;else{if(Ja.indexOf(n)<0)try{r=er(r)}catch(t){}else"v"===n&&(n=A);o[n]=r}}),s&&(o[q]=s),o[Jt]||(o[Jt]=Kt)}else{Ua=!0;var f=decodeURIComponent(decodeURIComponent(r.__lxsdk_params)).split(";"),l=Wa.u,d=void 0;Sn.each(f,function(t){var e=t.split(":"),n=e.shift(),r=e.join(":");if(r)if(l[n])(d=d||{})[l[n]]=r;else{if(!Wa[n])try{r=er(r)}catch(t){}o[n]=r}}),d&&(o[q]=d),o.se||(o.se="online")}}catch(t){Di(Ze.href,"lx-func-getUrlQuery-error",t.stack||t.message,2,0)}n[j]=o}return n}return n}function fo(t,u,s){return s=s||{},new Tr(function(o,c){E(function(){c({code:T})},3e3),ja(t,"getEnv",{},function(t,e){if(t)c(t);else if(Va=_e.nativeSDKVer=e.sdk_ver,a=_e.nativeSDKVer,wn.isStr(a)&&(we.MVL=-1<Kn(a,"4.14.0"),we.QR=-1<Kn(a,"4.14.0"),we.getReqId=-1<Kn(a,"4.12.0")),s.origin)o(e);else{var n={uuid:_,msid:w,uid:b,dpid:k,appnm:S,union_id:f};for(var r in u=u||{},n){var i=n[r];e[r]&&(u[i]=e[r])}o(u)}var a})})}function lo(){var t=qn.get(Ot);if(t){var e=t.split(","),n=/^\d+\.\d{5,}$/;return 3!==e.length?null:n.test(e[0])&&n.test(e[1])?{lat:e[0],lng:e[1],tm:e[2]}:null}return null}function vo(t){return bn(!0,{},t)}function po(t){var e=Ye.getElementsByTagName("meta"),n=Mn(e,"lx:appnm"),r=Mn(e,"lx:defaultAppnm"),i=ur,a=Ye.domain,o=Re();return Ae("appnm",n),Ae("defaultAppnm",r),sr&&Gn(ur||n||r||a),fr?n||(2===o?t:i||(r||a)):n||(i||(r||a))}function ho(){var t,e,n,r,i,a,o=ur===g||ur===h||jr||Or,c=(t=qn.get(bt),e=qn.get("iuuid")||qn.get("uuid")||t,n=no(),r=ro(),i=qn.get(kt)||qn.get(k),a={},e&&(a[_]=e),n&&(a[w]=n),t&&(a[m]=t),r&&(a[b]=r),i&&(a[k]=i),a),u=void 0,s={};o&&(s=so(Ze.href)),ur===g&&(s[_]?(c[_]?s[_]!==c[_]?Oe("uuidState","2"):Oe("uuidState","3"):(c[_]=s[_],Oe("uuidState","1")),delete s[_]):Oe("uuidState","0")),(u=bn(c,s)).ct=dr;var f=ia();f&&(u[q]=f);var l=li();u[m]=l,u[_]||(u[_]=l),u[w]||(u[w]=ba(),eo(u[w],u.uid||"")),u[_]&&Xa(u[_]);var d=po();wn.isStr(d)&&(u[S]=d);var v,p=(v=nn.replace(/^.*([A-Za-z-]+)\/com\.(sankuai(?!\.meituan\.)|meituan(?!\.sankuai\.)|dianping|sankuai\.meituan|meituan\.sankuai)\.([.A-Za-z0-9-]+)\/(\d+[.\d]+).*$/,"$4"),/^\d+(\.\d+)+$/.test(v)?v:null);return p&&(u.app=p),u}function go(e){return function(t){var n=t;return e!==t&&(n=bn(e,t)),n.dpid&&n.uid?n:ya().then(function(t){var e={};return t.dpid&&(e.dpid=t.dpid,t.userId&&(e.uid=""+t.userId),t.unionId&&(e.union_id=t.unionId)),n=bn(n,e)},function(t){return V(t),n})}}var mo=function(t){me();var o=ho();if(qr()){var e=fo(t,o);return r===ur&&(e=e.then(go(o),function(t){return V(t),go(o)()})),e.then(function(t){var e=po(t[S]),n=t[k],r=t[_],i=t[f],a=t;return t!==o&&(a=bn(o,t)),wn.isStr(e)&&(a[S]=e),r&&Xa(r),n&&qn.top(kt,n,_t),i&&qn.top("_lxsdk_unoinid",i,_t),a},function(t){return t&&V(t),o})}var n,c=vo(o),u=c[j];return(n=wn.now(),new Tr(function(t){if(jr||Or)if(/miniProgram/i.test(nn))t(!0);else if(Ge.WeixinJSBridge&&Ge.WeixinJSBridge.invoke)t("miniprogram"===Ge.__wxjs_environment);else{var e=setTimeout(function(){_e.wx_t=wn.now()-n,t(!1)},5e3);Ye.addEventListener("WeixinJSBridgeReady",function(){clearTimeout(e),_e.wx_t=wn.now()-n,t("miniprogram"===Ge.__wxjs_environment)})}else t(!1)})).then(function(t){if(_e.inWXMP=t){if(_e.nt=Or?7:6,"object"===(void 0===tr?"undefined":Ra(tr))&&!wn.isObj(u))for(var e in u={},tr)if(0===e.indexOf($a)){var n=e.slice($a.length),r=tr[e];if(n===q)try{u[q]=JSON.parse(r)}catch(t){}else u[n]=r}var i=function(t){var e=t;Ua&&(e=Wa[e]||e);var n=u[t];n&&(c[O]=c[O]||{},c[e]&&(c[O][e]=c[e]),Sn.find(Qa,function(t){return t===e})||(c[e]=n));try{tr.setItem($a+e,xn(n)?JSON.stringify(n):n)}catch(t){Di(location.href,"lx-func-setSessionStorage-error",t.stack||t.message,2,1)}};for(var a in u)i(a)}else _e.nt=vt;return delete c[j],Tr.resolve(c)})};function _o(t){return gt===La?Tr.resolve(vo(Pa)):ht===La?new Tr(function(e){var t;t=function(t){e(t)},Ba.push(t)}):(La=ht,mo(t).then(function(n){return Pa=bn(!0,{},n||{}),(jr||Or)&&(_e._isWXDev=Pa[Jt]===$t),La=gt,Sn.each(Ba,function(t,e){wn.isFunc(t)&&Ba[e](n)}),n}))}var yo=/([a-fA-F0-9-]+)(\.\d+)/,wo="_hc.v",bo=525600,xo="",ko=/(dper|dianping|51ping)\.com/.test(tn);function So(){return function(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}()+"."+Math.round(+new Date/1e3)}function Oo(){return!xo&&ko&&(xo=function(){var t=qn.get(wo);if(t||(t=So(),qn.top(wo,t,bo)),t){var e=t.match(yo);return e?e[1]:""}return""}()),xo}var jo=function(){var t=void 0;try{var e=document;if(e.querySelectorAll){var n=e.querySelectorAll("head script"),r=e.querySelectorAll("body script"),i=[];Sn.each(n,function(t){i.push(t)}),Sn.each(r,function(t){i.push(t)});for(var a=0;a<i.length;a++){var o=i[a].innerHTML.match(/\[['"]\s*_setPageId\s*['"]\s*,\s*(\d+)\s*\]/);if(o){t=o[1];break}}}}catch(t){}return function(){return t}}();function Ao(t){var e=this;e.s=t;var n=void 0,r=oi.get(Wt)||{s:t,d:e.d};r.s!==t?(oi.del(Wt),n=e.d=[]):n=e.d=r.d||[],e.l=n&&n.length||0}var qo=null;function Io(){return qo}function Co(t){return tr&&wn.isFunc(tr.getItem)?tr.getItem(t):qn.get(t)}function Eo(t,e){if(!tr||!wn.isFunc(tr.setItem))return qn.top(t,e,yt);try{return tr.setItem(t,e)}catch(t){Di(location.href,"lx-func-setSessionStorage-error",t.stack||t.message,2,1)}}function To(t){Eo(At,t)}function Do(){var t=Co(At);return t||""}function No(t){Eo(jt,t)}function Mo(){var t=Co(jt);return t||""}var Fo="QR",Ro=20480/30,Po=2592e5,Lo={},Bo=void 0,Vo=!(Ao.prototype={constructor:Ao,set:function(t,e,n){var r=this,i=r.l,a=r.d,o=r.indexOf(t),c={scid:0<i?a[i-1].scid+1:0,cid:t,bid:e,sf:n};-1<o?a.splice(o,i-o,c):a.push(c),r.l=a.length,oi.set(Wt,{s:r.s,d:a})},indexOf:function(t){for(var e=this.d||[],n=0,r=e.length;n<r;n++){if(e[n].cid===t)return n}return-1},toJSON:function(){var t=this.d;return t&&t.length?t:null}}),Uo=[],Wo=!1,Jo=["ua"].join("|")+"|",Ko=["lxcuid","category","sdk_ver","utm","uuid","msid","ct","appnm"],$o=["utm","seq","tm","nm","val_ref","ji","jf","val_lab","req_id","wi","wf","s_from","val_cid","val_bid"];function Qo(){if(!Vo){var t=gn(),e=[Bo.opts.cid],n=0,r=function(t,e){if(!t)try{var n=e;if(wn.isObj(e)||(n=JSON.parse(e)),0===n.code)(function t(e){var n=0,r=0;var i=[];var a=gn()-Po;for(var o in e)n+=e[o].bids.length,r+=e[o].bids.length;if(!r)return;for(var c in Lo)n+=Lo[c].bids.length,Lo[c].tm<a&&i.push(c);Ro<n&&(i.length?(Sn.each(i,function(t){delete Lo[t]}),t(e)):Lo={});Lo=bn(Lo,e);setTimeout(function(){oi.set(Fo,Lo)},10)})(function(t){if(!wn.isObj(t))return;var i={},a=gn();return Sn.each(t,function(e,r){i[r]=i[r]||{cid:r,tm:a,bids:[],envInfo:(e.envInfo||{}).quickReport||[],evsInfo:(e.evsInfo||{}).quickReport||[]},delete e.envInfo,delete e.evsInfo;var t=function(n){var t=e[n].quickReport||[];Sn.each(t,function(t){var e={tp:n,id:t};i[r].bids.push(e)})};for(var n in e)t(n)}),i}(n.data)),Vo=!0;else{if(304!==n.code)return void n.message;Vo=!0}}catch(t){}};for(var i in Lo)n++,t=Math.min(Lo[i].tm,t);0===n&&(t=0);var a=("https://ocean.sankuai.com/delivery/api/web-configFile?\n                timestamp="+t+"\n                &cidList="+e.join(",")+"\n                &rnd="+Math.random()).replace(/\s/g,"");"https"===Wn()&&Vi(a,{},{cb:r})||function(t,e,n,r){var i=void 0,a=(r=r||{}).outTime||5e3,o="__lxsdk_jsonp_callback_"+Math.random().toString(16).slice(2,10);/^([^?]+)\?/.test(t)?t=t.replace(/^([^?]+)\?/,"$1?"+e+"="+o+"&"):/^([^#]+)#/.test(t)?t=t.replace(/^([^#]+)#/,"$1?"+e+"="+o+"#"):t+="?"+e+"="+o;var c=Ye.createElement("script");c.src=t,Ge[o]=function(t){clearTimeout(i);try{n(rn,t)}catch(t){}delete window[o]},c.type="application/javascript",c.charset="utf-8",c.setAttribute("async","true"),Ye.body.appendChild(c),i=E(function(){try{n("timeout")}catch(t){}delete window[o]},a),E(function(){Ye.body.removeChild(c)},0)}(a,"callback",r)}}function Xo(t,e,n){if(!_e.useQR)return!1;if(!Lo[e])return!1;for(var r=Lo[e].bids,i=0,a=r.length;i<a;i++){var o=r[i];if(o.tp==t){if(t===K&&o.id==e)return!0;if(o.id==n)return!0}}return!1}function zo(t,e,n){var r={},i={};if(t&&Lo[t]){var a=Ko.concat(Lo[t].envInfo||[]),o=$o.concat(Lo[t].evsInfo||[]);Sn.each(a,function(t){e.hasOwnProperty(t)&&e[t]&&(i[t]=e[t])}),Sn.each(o,function(t){n.hasOwnProperty(t)&&Jo.indexOf(t+"|")<0&&(Oi?(r["evs."+t]=In(n[t]),r.lx_dict="true"):(r["evs."+t]=n[t],r.lx_dict="false"))});var c=bn(!0,i,r);Uo.push(c),d(Wo),Wo=setTimeout(function(){Vi("https://"+ee+"/?rnd="+Math.random(),Uo,{nm:n.nm,cb:ie}),Uo=[]},0)}}!function(){var t=oi.get(Fo);if(t)try{var e=void 0;e=wn.isObj(t)?t:JSON.parse(t),Lo=bn(!0,Lo,e)}catch(t){}}(),function e(){var n=su();return new Tr(function(t){n?t(n):setTimeout(function(){e().then(t)},100)})}().then(function(t){Bo=t,_e.useQR&&(Wn(),Qo())});var Ho=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,i=!1,a=void 0;try{for(var o,c=t[Symbol.iterator]();!(r=(o=c.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(t){i=!0,a=t}finally{try{!r&&c.return&&c.return()}finally{if(i)throw a}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")};window._lxsdk_ms=window._lxsdk_ms||"mem_"+ba(),window._lxsdk_seq=window._lxsdk_seq||0,Oe("m_msid",window._lxsdk_ms);var Go="category",Zo="setEvs",Yo=7e3,tc={overlen_cutoff:1},ec={code:ne,status:200,type:"native-report"},nc={code:re,status:200,type:"native-report"},rc="val_bid",ic="page",ac="s_from",oc="wi",cc="wf",uc="ji",sc="jf",fc=.95<wn.rnd()&&!vr,lc=[],dc=Ye.referrer,vc=[],pc=void 0,hc=void 0,gc={},mc=0,_c=0,yc=function(t,e,n){if(n){var r={};r[e]=n,t=bn(!0,t||{},{custom:r})}return t},wc=function(t,e){var n=rr(t);return E(function(){ir(n,{code:-1,status:408,type:"overtime"})},_n(e)&&e||2500),n};function bc(t,e){var n=this;n.env=e||{},n.currentEvs={},n.opts=bn(!0,{},t),lc.push(n),Ke=n}var xc=bc.prototype;function kc(t){return 6===t._ptpvs}function Sc(){return!mc}function Oc(t){return(t=t||{})&&!wn.isObj(t)&&(t={cid:""+t}),t}function jc(n,r,i,a,o){var c=this,u=wc((o=o||{}).callback,o.callbackTimeout),t=o,e=t.isLeave,s=t.currentPageInfo,f=t.mvDelay,l=t.sf,d=wn.isStr(o.category)&&""!==o.category,v=Xo(n,r,i);if(Re()===vt){var p=Dc(c),h=ua.getAll(),g=Rc(n,r,i,a,null,o),m=[g],_=Bc(p,m,h,o);if(v&&zo(r,p,g),n===z){if(f&&!d)return g[at]&&(g[at].md=f),vc.push(g),void E(function(){if(vc.length){var t=Bc(p,vc,h,o);c.send(t,{cbkey:u,nodelay:!0}),vc=[]}},f*lt)}else{if(n===H)return void $e.call(c,H,p,g,{tag:h});if(n===Q){if(s&&jn(_.evs,function(t){t[Bt]=t[Bt]||{},t[Bt][ic]=c._cpi}),_=Bc(p,m,h,o),e){var y=Bn(),w=Rc($,r,rn,y);_.evs.push(w),To(r),No(pc)}sr&&l&&Io().set(r,i,l)}}c.send(_,{nm:n,cbkey:u})}else{var b=c.env,x=void 0,k=Nc({isQuickReport:v}),S=[Lc.call(c,n,r,i,a)];if(n===Q&&(x={sf:l},c._cpi&&(x.cpi=c._cpi),S=[Lc.call(c,n,r,i,a,null,x)],e)){var O=Bn(),j=Lc.call(c,$,r,null,O);S.push(j),To(r),No(pc)}b[q]&&(S=function(t,e){if(!Sn.isArray(t)||!t.length)return t;if(!wn.isObj(t[0][Bt]))return t[0][Bt]={page:{utm:e[q]}},t;if(!wn.isObj(t[0][Bt][ic]))return t[0][Bt][ic]={utm:e[q]},t;return t[0][Bt][ic]=bn(!0,t[0][Bt][ic],{utm:e[q]}),t}(S,b));var A=wn.isStr(o.category)&&o.category||b[Go];new Date;ja(Tc(A),Zo,S,function(t,e){t?(Pe(vt),V(t),new Date,ir(u,nc),jc.call(c,n,r,i,a,o)):(ir(u,ec),new Date)},{nativeOptions:k})}}function Ac(){return pc||(pc=Ic()),pc}function qc(t){var e=oi.get(I);return e&&t&&oi.del(I),e}function Ic(){return wn.now().toString(16)+"-"+Math.floor(65535*wn.rnd())+"-"+Math.floor(65535*wn.rnd())}function Cc(t){var e,n,r=t.nm;K===r?(t.nm="mpt",t.val_act="pageview"):$===r?(t.nm="report",t.val_act="quit"):(t.nm="mge",t.event_type=(e=r,(n={})[Z]="order",n[Y]="pay",n[Q]="click",n[G]="return",n[z]="view",n[X]="click",n[e]||r)),t.nt=0,t.isauto=8}function Ec(t){var e="data_sdk_";return 0!==t.indexOf(e)&&(t=e+t),t}function Tc(t){var e="data_sdk_";return 0===t.indexOf(e)&&(t=t.replace(e,"")),t}function Dc(t){var e=bn(!0,{},t.env);e[Go]=Ec(e[Go]);var n=no();n||eo(n=ba(),e.uid||""),_e.inWXMP&&wn.isObj(e[O])&&wn.isObj(t.env[O])?e[O][w]=t.env[O][w]=n:e[w]=t.env[w]=n;var r=e.utm,i={ua:ar,sdk_ver:y,ch:r&&r.utm_source?r.utm_source:"web",sc:br};i[Ft]=y,_e.debug&&(i._misid=_e.debug);var a=bn(!0,i,e);return _e.isDev||_e._isWXDev?a[Jt]=$t:a[Jt]=Kt,fr&&!Me()&&delete a.ch,a}function Nc(t){return(t=t||{}).isQuickReport=be("QR")&&!!t.isQuickReport,t}function Mc(t,e){var n=t.toString().split("."),r=Ho(n,2),i=r[0],a=r[1],o=e.toString().split("."),c=Ho(o,2),u=c[0],s=c[1];return{wi:i=999*+i,wf:a=a?a.replace(/3/g,"c").replace(/7/g,"g").replace(/9/g,"i"):"0",ji:u=777*+u,jf:s=s?s.replace(/2/g,"b").replace(/4/g,"d").replace(/6/g,"f"):"0"}}function Fc(t){if(wn.isObj)try{return JSON.stringify(t),!0}catch(t){return Di(location.href,"lx-func-jsonStringify",t.stack||t.message,2),!1}return!0}function Rc(t,e,n,r,i,a){i=i||L,a=a||{};var o=uo(),c=lo();Fc(r)||(r={error_val_lab:1});var u,s,f,l=wn.isObj(r)&&r.custom||{},d=void 0,v=K===t,p=Z===t,h=Y===t,g={nm:t,tm:wn.now(),nt:_e.nt,isauto:i,val_cid:e,req_id:Ac(),seq:o,lx_inner_data:bn(!0,{},je())};if(g[at].m_seq=++window._lxsdk_seq,v){var m=Ze.href;g.url=m,(d=dc)&&(g.refer_url=d),i===L&&(dc=m)}(p||v||h)&&sr&&(u=g,(s=Io().toJSON())&&(u[ac]=s),g=u),r=yc(r,"_hguid",Oo()),(f=r)&&f.custom&&"v3"===f.custom._api&&!e&&(g.val_cid=Ye.title||Ze.pathname,r=yc(r,"_cid",1)),wn.isObj(l)&&"v3"===l._api&&(g[at]._api="v3",delete l._api),sr&&a.sf&&(g[at].use_sfrom=1);try{g[at].ht=Me()}catch(t){}if(v&&(r=yc(r,"_hpid",jo()),r=yc(r,"_lx_cv","prod"),_e.wx_t&&(r=yc(r,"_wx_t",_e.wx_t))),n&&(g[rc]=n),_e.geo){var _=Mc(_e.geo.lat,_e.geo.lng);g[oc]=_.wi,g[cc]=_.wf,g[uc]=_.ji,g[sc]=_.jf}else if(c){var y=Mc(c.lat,c.lng);g[oc]=y.wi,g[cc]=y.wf,g[uc]=y.ji,g[sc]=y.jf}if(r){try{var w=JSON.stringify(r).length;Yo<=w&&((r=tc).overlen_length=w)}catch(t){Di(location.href,"lx-func-jsonStringify",t.stack||t.message,2)}if((g[Bt]=r).lat&&r.lng){var b=Mc(r.lat,r.lng);g[oc]=b.wi,g[cc]=b.wf,g[uc]=b.ji,g[sc]=b.jf}}return g}function Pc(t){return lr?t:cr&&!Ia?t:un(t)}function Lc(t,e,n,r,i,a){i=i||L;var o=(a=a||{}).fromWA,c=this.env.appnm,u=lo(),s=!Le,f=void 0,l={nm:t,tm:wn.now(),nt:dt,isauto:i,val_cid:e,shouldCover:s,lx_inner_data:bn(!0,{},je())};l=bn(!0,l,gc),hc&&(l.req_id=hc),a.sf&&(l[at].use_sfrom=1,l._sf=a.sf),Fc(r)||(r={error_val_lab:1});var d=void 0,v=bn(!0,{},r||{}),p=K===t;if(p){var h=Pc(Ze.href);d={ua:ar,url:h,_fromWA:!!o};var g=ia();g&&g.utm_source&&(d.utm=g),(f=dc)&&(d.refer_url=Pc(f)),i===L&&(dc=h)}else d={};if(l=bn(l,{web_cid:e,web_req_id:Ac(),web_refer_cid:Do(),web_refer_req_id:Mo(),web_first_pv:!!(_c<=1&&Ge.history&&1===Ge.history.length)}),Sn.each({web_req_id:Ac(),web_sdk_ver:y,lxcuid:li(),web_appnm:c},function(t,e){wn.isStr(t)&&(d[e]=t)}),wn.isObj(v.custom)&&"v3"===v.custom._api&&(d.web_appnm=function(t){if(wn.isStr(t))return t&&ge[t]||ge}("appnm"),l[at]._api="v3",delete v.custom._api),a.cpi&&!v.page&&(v.page=a.cpi),v.custom=bn(!0,v.custom,d),v=yc(v,"_hguid",Oo()),p&&(v=yc(v,"_hpid",jo())),t!==X||qa?Fa()||Cc(l):Fa()?l.nm=Q:Cc(l),u){var m=Mc(u.lat,u.lng);l[oc]=m.wi,l[cc]=m.wf,l[uc]=m.ji,l[sc]=m.jf}if(n&&(l[rc]=n),v)try{var _=JSON.stringify(v).length;Yo<=_&&((v=tc).overlen_length=_)}catch(t){Di(location.href,"lx-func-jsonStringify",t.stack||t.message,2)}return l[Bt]=v,p&&!Fa()&&(l.val_val=v,delete l[Bt]),l}function Bc(t,e,n,r){var i=(r=r||{}).category;return Sn.isArrayLike(e)||(e=[e]),wn.run(e,function(t){t&&n&&(t.tag=n)}),t.evs=e,wn.isStr(i)&&(t[Go]=Ec(i)),t}function Vc(t,e){var n={};return n[ft]=e,bn(n,t)}function Uc(n,t,e,r){try{var i=(u=t,s=e,f=r,l=null,!wn.isStr(u)||s||f?wn.isObj(u)&&wn.isStr(s)&&!f&&(l=s,s=null):(l=u,u=null),l&&(f=bn({cid:l},f||{})),{lab:u,env:s,opts:f}),a=i.lab,o=i.env;r=Oc(i.opts);var c=n.opts.cid=r.cid||n.opts.cid;if(!c||!wn.isStr(c))return;r=bn({cid:c},r),o&&wn.isObj(o)&&Sn.each(o,function(t,e){n._dt.set(e,t,rn,!0)}),n._dt.pageView(a,r)}catch(t){Di(location.href,"lx-api-pageView",t.stack||t.message,0)}var u,s,f,l}function Wc(t,e){this.env=t||{},this.opts=e||{},this._t=[]}xc.set=function(t,e,n,r){var i=this,a=i.env,o=_e.inWXMP&&wn.isObj(a[O]);if(wn.isObj(t))jn(t,function(t,e){i.set(e,t)});else if((t!==Go||e)&&t!==Jt)if(!r&&o&&a[O][t]?a[O][t]=e:a[t]=e,t===Go&&(_e.c=e),"utm"===t&&wn.isObj(e)&&!o&&ra(e),Ae(t,e),S===t&&Gn(e),dt!==Re()||zt[t])wn.isFunc(n)&&n(a,i);else{var c={},u=Tc(a[Go]);c[t]=e,ja(u,"setEnv",c,function(){wn.isFunc(n)&&n(a,i)})}},xc.get=function(t,e){wn.isFunc(e)&&e(this.env[t],this)},xc.pageView=function(n,r){r=Oc(r)||{};var t=void 0,i=this,e=r.fromWA,a=r.withlab,o=wc(r.callback,r.callbackTimeout),c=i.opts.cid,u=r.cid||c,s=r.isauto||L,f=r.isAutoInit,l=r.reportStatus,d=c&&!(kc(i)||f)&&!Sc(),v=l===vt||vt===Re(),p=i.env;if(Fc(n)||(n={error_val_lab:1}),e&&a?(s=6,n=this._cpi||{}):this._cpi=n,d&&!Ie()){var h=Bn();t=v?Rc($,c,null,h):Lc.call(i,$,c,null,h),To(c),No(pc)}if(qe(0),c&&(kc(i)||Sc())||(pc=Ic()),(i.opts.cid=u)||!e){var g=Xo(K,u);if(v){var m=Dc(i),_=ua.getAll(),y=Rc(K,u,null,n,s),w=[y];d&&t&&w.unshift(t);var b=Bc(m,w,_,r);g&&zo(u,m,y),this.send(b,{nm:K,cbkey:o}),_c++,f||mc++}else{var x=Nc({isQuickReport:g,shouldCoverCid:!0,needCachePD:_e.nativeAutoPD}),k=[Lc.call(i,K,u,null,n,s,{fromWA:e})];d&&t&&k.push(t);var S=wn.isStr(r.category)&&r.category||p[Go];ja(Tc(S),Zo,k,function(t,e){t?(Pe(vt),ir(o,nc),i.pageView(n,r),Di(location.href,"lx-knb-setEvs-pv-error",V(t),2)):(_c++,f||mc++,ir(o,ec))},{nativeOptions:x})}i.currentEvs={cid:u,req_id:Ac(),refer_cid:Do(),refer_req_id:Mo()},i._ptpvs=f?6:L,Ln()}},xc.pageDisappear=function(n,r){if(0!==_c){r=bn({},r);var i=this,t=r.cid||i.opts.cid,e=r.shouldStore;qe(p);var a=Bn();if(n=bn(a,n),To(t),No(pc),vt===Re()){var o=Dc(i),c=Rc($,t,null,n,r.isAuto),u=Bc(o,vc.concat(c),ua.getAll(),r);if(vc=[],sr&&e&&oi.nt){Hn()&&(_e.inWXMP&&wn.isObj(u[O])&&u[O][S]?u[O][S]=Zn():u[S]=Zn());var s=qc()||[];Sn.isArray(s)?oi.set(I,s.concat(u)):oi.set(I,[u])}else i.send(u)}else{var f=this.env,l=Nc(),d=[Lc.call(i,$,t,null,n)],v=wn.isStr(r.category)&&r.category||f[Go];ja(Tc(v),Zo,d,function(t,e){t&&(Pe(vt),i.pageDisappear(n,r))},{nativeOptions:l})}ze(),ir(ae)}},xc.systemCheck=function(n,r,i){i=bn({},i);var a=this,t=i.cid||a.opts.cid,e=!!i.isLXLog;if(vt===Re()){var o=Dc(a),c=Bc(o,[Rc(X,t,n,r)],ua.getAll(),i);e&&(o.category="others"),this.send(c,i)}else{var u=a.env,s=Nc(),f=[Lc.call(a,X,t,n,r)],l=wn.isStr(i.category)&&i.category||u[Go];e&&(l="others"),ja(Tc(l),Zo,f,function(t,e){t&&(Pe(vt),a.systemCheck(n,r,i))},{nativeOptions:s})}},xc.moduleView=function(t,e,n){var r=(n=bn({},n)).cid||this.opts.cid;n.mvDelay=this.opts.mvDelay||n.delay,jc.call(this,z,r,t,e,n)},xc.moduleViewList=function(t,e,n){var r=(n=bn({},n)).cid||this.opts.cid;n.mvDelay=this.opts.mvDelay||n.delay;var i=be("MVL");Re()!==dt||i?jc.call(this,H,r,t,e,n):jc.call(this,z,r,t,e,n)},xc.moduleClick=function(t,e,n){var r=(n=bn({},n)).cid||this.opts.cid;n&&n.isLeave&&qe(p),n.currentPageInfo=n.withPageInfo&&wn.isObj(this._cpi)?this._cpi:rn,jc.call(this,Q,r,t,e,n)},xc.moduleEdit=function(t,e,n){var r=(n=bn({},n)).cid||this.opts.cid;jc.call(this,G,r,t,e,n)},xc.order=function(n,r,i){i=bn({},i);var a=this,o=wc(i.callback,i.callbackTimeout),t=i.cid||a.opts.cid;Vn(0,r);var e=Xo(Z,t,n);if(vt===Re()){var c=Dc(this),u=Rc(Z,t,n,r),s=[u],f=ua.getAll(),l=Bc(c,s,f,i);e&&zo(t,c,u),this.send(l,{cbkey:o,nodelay:!0})}else{var d=this.env,v=Nc({isQuickReport:e}),p=[Lc.call(a,Z,t,n,r)],h=wn.isStr(i.category)&&i.category||d[Go];ja(Tc(h),Zo,p,function(t,e){t?(Pe(vt),ir(o,nc),a.order(n,r,i)):ir(o,ec)},{nativeOptions:v})}},xc.pay=function(n,r,i){i=bn({},i);var a=this,o=wc(i.callback,i.callbackTimeout),t=i.cid||a.opts.cid;Vn(0,r);var e=Xo(Y,t,n);if(vt===Re()){var c=Dc(a),u=Rc(Y,t,n,r),s=[u],f=ua.getAll(),l=Bc(c,s,f,i);e&&zo(t,c,u),this.send(l,{nodelay:!0,cb:function(t,e,n){ua.clear(),ir(o,{code:t,status:e,type:n})}}),a.clearTag()}else{var d=this.env,v=Nc({isQuickReport:e}),p=[Lc.call(a,Y,t,n,r)],h=wn.isStr(i.category)&&i.category||d[Go];ja(Tc(h),Zo,p,function(t,e){t?(Pe(vt),ir(o,nc),a.pay(n,r,i)):ir(o,ec)},{nativeOptions:v})}},xc.tag=function(n,t,e,i){var r=void 0,a=void 0,o=this.env,c=arguments,u=[],s=function(t){if(!wn.isObj(t))return t;for(var e=t,n=0,r=u.length;n<r;n++){if(!e)return e;e=e[u[n]]}return e},f=function(){Sn.each(c,function(t){if(!wn.isStr(t))return!1;u.push(t)})},l=function(t,e,n){var r={};r[t]=e,a=Tc(o[Go]),ja(a,"setTag",r,function(t,e){i&&(n&&f(),i(t,s(e),!0))})},d=function(t){var e=ua.getAll();t||f(),i&&i(0,s(e),!1)};if(Sn.each(c,function(t){wn.isFunc(t)&&(i=t)}),wn.isObj(n)){var v=this;Sn.each(n,function(t,e){v.tag(e,t)})}else wn.isStr(n)&&wn.isObj(t)?vt!==Re()?l(n,r=t,!0):(jn(t,function(t,e){ua.set(n,e,t)}),d(!0)):(wn.isObj(e)||wn.isStr(e))&&function(t){if(!wn.isStr(t)&&!t.length)return!1;return!0}(n)&&wn.isStr(t)?vt!==Re()?((r={})[t]=e,l(n,r,!0)):(ua.set(n,t,e),d(!0)):wn.isFunc(n)||wn.isFunc(t)||wn.isStr(n)&&wn.isStr(t)&&wn.isFunc(e)?vt!==Re()?(f(),a=Tc(o[Go]),ja(a,"getTag",{},function(t,e){i&&i(t,s(e),!0)})):d():i&&i(-1)},xc.clearTag=function(t,e,n){var r=0;vt===Re()?(wn.isFunc(t)&&(n=t,t=rn),ua.clear(t,e),n&&n(0)):r=-1,n&&n(r)},xc.sfrom=function(r){var i=void 0,t=void 0,e=this.env;vt!==Re()?(t=Tc(e[Go]),ja(t,"getSFrom",{},function(t,e){if(e){var n=e.data?e.data:e;i=wn.isStr(n)?JSON.parse(n):n,r(t,i)}})):r(1,[])},xc.send=function(t,r){var e=[];r=bn({cb:function(t,e,n){r.cbkey&&ir(r.cbkey,{code:t,status:e,type:n})}},r),wn.run(t,function(t){Hn()&&(_e.inWXMP&&wn.isObj(t[O])&&t[O][S]?t[O][S]=Zn():t[S]=Zn()),e.push(t)});var n=qc(!0);n&&Sn.isArray(n)&&(e=n.concat(e)),("data_sdk_saaspay"===(e[0]&&e[0][Go])&&"menuorder-new-rms-h5"===Ge.__appName__||fc)&&(r.useBeacon=!0),r.nodelay?Pi(e,r):Pi(e,r)},xc.getAll=function(){return lc};var Jc=Wc.prototype;Jc.create=function(t,e){var n=bn({},this.env);n=bn(n,{category:t});var r=bn({isDefault:!1},this.opts),i=new bc(r=bn(r,e||{}),n);return this._t.push(i),e.isDefault&&(this._dt=i),i},Jc.config=function(t,e){try{if("isDev"===t&&_e._lockSDKENV)return;return rn!==t&&(_e[t]=e),"cid"===t&&kn(e)&&(this.opts.cid=e),_e[t]}catch(t){Di(location.href,"lx-api-config",t.stack||t.message,0)}},Jc._initPV=function(t,e){Uc(this,this.config("pageValLab"),t=bn(t,this.config("pageEnv")),{isauto:6,cid:e,isAutoInit:!0})},Jc.pageView=function(t,e,n){Uc(this,t,e,n)},Jc.moduleView=function(t,e,n){try{if(!t||!wn.isStr(t))return;this._dt.moduleView(t,e,n)}catch(t){Di(location.href,"lx-api-moduleView",t.stack||t.message,0)}},Jc.moduleViewList=function(t,e,n){try{if(!t||!wn.isStr(t))return;this._dt.moduleViewList(t,e,n)}catch(t){Di(location.href,"lx-api-moduleViewList",t.stack||t.message,0)}},Jc.systemCheck=function(t,e,n){try{if(!t||!wn.isStr(t))return;this._dt.systemCheck(t,e,n)}catch(t){Di(location.href,"lx-api-systemCheck",t.stack||t.message,0)}},Jc.moduleClick=function(t,e,n){try{if(!t||!wn.isStr(t))return;this._dt.moduleClick(t,e,n)}catch(t){Di(location.href,"lx-api-moduleClick",t.stack||t.message,0)}},Jc.moduleEdit=function(t,e,n){try{if(!t||!wn.isStr(t))return;this._dt.moduleEdit(t,e,n)}catch(t){Di(location.href,"lx-api-moduleEdit",t.stack||t.message,0)}},Jc.order=function(t,e,n,r){try{if(!t||!wn.isStr(t))return;this._dt.order(t,Vc(n,e),r)}catch(t){Di(location.href,"lx-api-order",t.stack||t.message,0)}},Jc.pay=function(t,e,n,r){try{if(!t||!wn.isStr(t))return;this._dt.pay(t,Vc(n,e),r)}catch(t){Di(location.href,"lx-api-pay",t.stack||t.message,0)}},Jc.pageDisappear=function(t,e){try{this._dt.pageDisappear(t,e)}catch(t){Di(location.href,"lx-api-pageDisappear",t.stack||t.message,0)}},Jc.tag=function(t,e,n,r){try{this._dt.tag(t,e,n,r)}catch(t){Di(location.href,"lx-api-tag",t.stack||t.message,0)}},Jc.getBase64WebTag=function(t,e){try{var n=(e=e||{}).full,r=bn(!0,{},ua.getAll(!n)),i=Nn(JSON.stringify(r));i=i.replace(/\+/g,"*").replace(/\//,"_").replace(/=/g,"."),wn.isFunc(t)&&t(i)}catch(t){Di(location.href,"lx-api-getBase64WebTag",t.stack||t.message,0)}},Jc.sfrom=function(t){this._dt.sfrom(t)},Jc.clearTag=function(t,e,n){try{this._dt.clearTag(t,e,n)}catch(t){Di(location.href,"lx-api-clearTag",t.stack||t.message,0)}},Jc.setGeoLocation=function(t,e){if(null!==t){if(_n(t)&&_n(e))e=e.toString(),t=t.toString();else if(!/^\d+\.\d+$/.test(t)||!/^\d+\.\d+$/.test(e))return;_e.geo={lat:e,lng:t}}else _e.geo=null},Jc.getAll=function(t){t&&t(this._t)},Jc.getTracker=function(e,t){var n=Sn.find(this._t,function(t){return t.env.category===e});t&&t(n)},Jc.get=function(t,e){this._dt.get(t,e)},Jc.getNative=function(n,r){try{var i=this;fr?fo(_e.c,rn,{origin:!0}).then(function(t){var e=kn(n)?t[n]:t;r(e,i._dt)},function(){r()}):r()}catch(t){Di(location.href,"lx-api-getNative",t.stack||t.message,0)}},Jc.set=function(t,e,n){try{this._dt.set(t,e,n)}catch(t){Di(location.href,"lx-api-common-set",t.stack||t.message,0)}},Jc._setRequestID=function(t){hc=t},Jc._setNativeEvsData=function(t,e){var n;n=e,gc[t]=n};var Kc=void 0,$c=!0,Qc=function(){var e;if(!!!_e.onWebviewAppearAutoPV)return e=_e.c,void su().getTracker(e,function(t){if(t&&t.currentEvs){var n=bn({refer_cid:Do(),refer_req_id:Mo()},t.currentEvs);Sn.each(n,function(t,e){n["web_"+e]=t,delete n[e]}),ja(e,"setWebPageData",n,function(t,e){})}});Ln(),fu(),Kc.pageView(rn,rn,{fromWA:!0,withlab:!!_e.positiveLab}),qe(0)},Xc=function(){!!_e.onWebviewAppearAutoPV&&(Ie()||(qe(p),Kc.pageDisappear({})))},zc=function(){$c=!0,Qc()},Hc=function(){$c=!1,Xc(),ze()},Gc=function(){$c&&Qc()},Zc=function(){$c&&(Xc(),ze())},Yc=void 0,tu=!!/\d+\.\d+\.\d+/.test(Sr)&&0<=Kn(Sr,"11.3.0");function eu(t,e){wn.isStr(t)&&(e=wn.isFunc(e)&&e||function(){},"on"+t in Ge||"KNB:"+t in Ge?wn.on(window,t,function(t){e(t)}):(Yc=window.KNB)&&wn.isFunc(Yc.subscribe)&&Yc.subscribe({action:t,handle:function(){e()},success:function(){},fail:function(t){}}))}var nu={hook:function(){try{eu("appear",zc),eu("disappear",Hc),tu&&(eu("foreground",Gc),eu("background",Zc))}catch(t){Di(location.href,"lx-knb-hook-error",t.stack||t.message,2,1)}Kc=su()}},ru=["setGeoLocation"].join("|"),iu=[],au=pt,ou=void 0,cu=void 0;function uu(t,e){return{cb:t,cmd:e}}function su(){return ou}function fu(){var e,r;Be(!1),(e=cu,r={none:!0},new Tr(function(n){try{var t=Kn(Va,"4.12.0");!Va||!_n(t)||t<0?n(r):e&&ur||qr()?ja(e,"getReqId",{},function(t,e){n(t?r:e)}):n(r)}catch(t){n(r),Di(location.href,"lx-knb-getReqId-error",t.stack||t.message,2,1)}})).then(function(t){var e=t||{},n=e.val_ref,r=e.req_id,i=e.refer_req_id,a=!!(r||n||i);r&&ou._setRequestID(r),n&&ou._setNativeEvsData("val_ref",n),i&&ou._setNativeEvsData("refer_req_id",i),Be(a)})}function lu(t,e){if(gt===au)t&&t(ou);else if(ht===au)t&&iu.push(uu(t,e));else{wn.now();iu=iu.concat(uu(t,e));var n=Ye.getElementsByTagName("meta"),o=Mn(n,"lx:cid")||_e.cid;if(!(cu=_e.c=Mn(n,"lx:category")))return void(au=pt);au=ht;var c=Mn(n,"lx:mvDelay");c=isNaN(c)?0:parseInt(c,10);var u="off"!==Mn(n,"lx:autopv");_e.autoPV=u,E(fu,1e3),Tr.all([_o(cu)]).then(function(t){var e,r=t[0],n=r.appnm,i=ke();!wn.isStr(n)||Ye.domain,ou=new Wc(r,{cid:o,isDefault:!0,mvDelay:c}),cu&&ou.create(cu,{isDefault:!0}),r=bn(!0,ou._dt.env,r),ou._dt.env=r,wn.now();try{var a=[];Sn.each(iu,function(t){var e=t.cb,n=t.cmd;"config"===n||"set"===n||-1<ru.indexOf(n)?e(ou,r):a.push(t)}),sr&&(e=r.msid,qo||(qo=new Ao(e))),i&&oi.set(Xt,i),u&&cu&&o&&o&&ou._initPV(r,o),nu.hook(function(){}),Sn.each(a,function(t){t&&t.cb&&t.cb(ou,r)})}catch(t){}}).then(function(){au=gt,ei.check()},function(t){throw au=gt,t})}}var du=[["click",ut],["tap",ut],["view","moduleView"],["return","moduleEdit"],["order",st],["pay","pay"]],vu=Sn.reduce(du,function(t,e){return t[e[0]]=e[1],t},{}),pu=[["mpt",ot],["report","pageDisappear"]],hu=Sn.reduce(pu,function(t,e){return t[e[0]]=e[1],t},{}),gu=Sn.reduce(["config","event","send","use"],function(t,e){return t[e]=!0,t},{}),mu=function(t,e){var n=Ye.getElementsByTagName("head")[0],r=Ye.createElement("meta");r.setAttribute("name",t),r.setAttribute("from","v3api"),r.setAttribute("content",e),n.appendChild(r)},_u=function(n,t){return n=n||{},jn(t,function(t,e){1==={act:1,cid:1,val:1,lab:1,bid:1}[e]?n["val_"+e]=t:n[e]=t}),n},yu=function(t,e,n){(t&&!xn(t)&&(t={custom:{_lab:t}}),!t&&n&&(t={}),n)&&((t.custom=t.custom||{})[e]=n);return t},wu=function(t,e,n){return t&&!xn(t)&&(t={custom:{_lab:t}}),t&&(t[e]=n),t},bu=function(t,e){var n=t[Bt],r=t[Ut];if(n&&n===r&&(r=bn(!0,{},r)),e&&(r||n)){var i=n;n=r||{},i&&(n=yu(n||{},"_lab",i))}else if(!e&&(r||n)){if(kn(r)&&(r={analyse_val:r}),kn(n))n={val_lab:n};r&&(n=wu(n||{},"page",r))}return rn!==t[et]&&(n=yu(n||{},"_act",t[et])),rn!==t[tt]&&(n=yu(n||{},"_et",t[tt])),rn!==t[rt]&&(n=wu(n||{},rt,t[rt])),rn!==t[it]&&(n=yu(n||{},"_el_id",t[it])),n};function xu(t){var e,n,r,i=(n=(e=t).split("."),r=void 0,2===n.length&&(e=n[1],r=n[0]),[e,r]),a=void 0;return i[1]&&(a=i[1]),[t=i[0],a]}var ku=function e(n,t){var r=xu(n);n=r[0];var i=r[1],a=t[0],o=t[1];if(Sn.isArray(a))return An(a,function(t){return e(i?i+"."+n:n,[t,o])});var c,u,s=(a.nm||"mge").toLowerCase();a.nm=s,(u=(c=a).val)&&(_u(c,u),delete c.val),a=c;var f="mge"===s;if("mpt"===s)return function(t){t=_u(t,t.val);var e=bu(t,!0);return[ot,e,null,t[nt]]}.apply(null,t);var l,d,v=st===s,p="pay"===s,h=a[tt],g=a[et],m=bu(a,!1);v||p||h||!f||!g?p||v?n=s:(d=h,n="mge"===(l=s)?d?vu[d]||ct:ut:"mpt"===l||"report"===l?hu[l]:ct,f||(m=yu(m||{},"_nm",s))):n=ut;var _=a[nt];return _&&((o=o||{}).cid=_),i&&yu(m,"_logchannel",i),yu(m=m||{},"_api","v3"),n===st||"pay"===n?[n,a[Vt],m.order_id,m,o]:[n,a[Vt],m,o]},Su=function t(){if(!t.f){mu("lx:autopv","off"),t.f=!0}},Ou=function(t){if(!t||!t.length)return t;try{var e=t[0];(function(t){if(wn.isFunc(t))return!1;var e=t.indexOf(".");return 0<e&&(t=t.substr(e+1)),!!gu[t]})(e)&&(t=Sn.slice(t,1),ju(e)?(zn(3),Su(),t=ku(e,t)):Au(e)?(zn(3),Su(),t=function(t,e){var n=xu(t)[1];t=ot;var r=e[1],i=e[2],a=n?{custom:{_logchannel:n}}:rn,o={};if(kn(r))xn(i)?a=i:kn(i)&&(a=yu({},"analyse_val",i));else if(xn(r)){i=(o=_u(o,r))[Ut],kn(i)&&(i=yu({},"analyse_val",i)),a=i;var c=o[Bt];c&&yu(a,"_lab",c),r=o[nt]}var u=void 0;return r&&((u={}).cid=r),[t,a=yu(a,"_api","v3"),rn,u]}(e,t)):qu(e)?(zn(3),Su(),t=function(t,e){var n=e[0],r=e[1];if(n&&(n=n.replace(/^data_sdk_/i,""),mu("lx:category",n)),xn(r))return["set",r]}(0,t)):Iu(e,t[0])?(Su(),n=e,r=t[0],i=t[1],t="appnm"===r&&kn(i)?void mu("lx:appnm",i):("cid"===r&&kn(i)&&mu("lx:cid",i),[n,r,i])):t.unshift(e))}catch(t){}var n,r,i;return t},ju=function(t){if(wn.isFunc(t))return!1;var e=t.indexOf(".");return 0<e&&(t=t.substr(e+1)),"event"===t},Au=function(t){var e=t.indexOf(".");return 0<e&&(t=t.substr(e+1)),"send"===t},qu=function(t){return"use"===t},Iu=function(t,e){var n=!1;return"cid"!==e&&"appnm"!==e||(zn(3),n=!0),"config"===t&&n},Cu=void 0,Eu=void 0;function Tu(t,e,n,r,i){if(wn.isFunc(e))e.call(t,t,r,i);else if(!i&&wn.isStr(e)){if(wn.isFunc(t[e]))return t[e].apply(t,n);if("onLoad"===e)try{n[0](bn(!0,{},r))}catch(t){}}}function Du(){if(!Eu){Eu=!0;var r=void 0;vr&&wn.on(Ye,"mouseup",function(t){var e=t.target||t.srcElement,n=e.tagName+e.href;n=n.toLocaleLowerCase(),1===e.nodeType&&/^ajavascript:/i.test(n)&&(r=new Date)});var t=Ge.onbeforeunload;sr&&lr?Ge.addEventListener("pagehide",$n(!1,vr,r,void 0,Nu,rn,Ie)):Ge.onbeforeunload=$n(!1,vr,r,void 0,Nu,t,Ie)}}function Nu(r){try{var t=document.getElementById("__lxsdk_devltool_message_node");if(t){var e=new CustomEvent("lxsdk",{detail:{args:JSON.stringify(arguments)}});t.dispatchEvent(e)}}catch(t){}var n=arguments;if(n.length){var i=Sn.slice(n,1,n.length);try{Cu?Tu(Cu,r,i,Cu._dt?Cu._dt.env:null):lu(function(t,e,n){Tu(Cu=t,r,i,e,n),Du()},r)}catch(t){try{var a=t.stack.split(/\n\s*at\s/m)[1].replace(/^.*\(([^)]+)\).*$/,"$1");if(!/\/(lx|analytics)\.js/.test(a))return}catch(t){}finally{Di(location.href,"lx-api-error","",t.message+"\n"+t.stack,0)}}}}window._lxsdk_isDOMReady||(window._lxsdk_isDOMReady=!0,function(){Mi();var s=!0,f=!1,l=function(){var t=Fn();t&&(t.q.push=function e(t){try{var n,r=(n=Ou(t))?n[0]:"";if(Sn.isArray(r))return void jn(n,function(t){e(t)});"start"===r?(s=!0,f||d(l)):!1===s?n&&l.push(n):Nu.apply(rn,n)}catch(t){Di(location.href,"lx-func-init-error",t.stack||t.message,2)}});for(var e=void 0,n=void 0,r=[],i=[],a=[],o=t&&Sn.isArray(t.q)?t.q:[],c=0,u=o.length;c<u;c++)"config"===(n=o[c][0])?i.push(o[c]):e||"use"!==n?a.push(o[c]):(r.push(o[c]),e=!0);return o=i.concat(r.concat(a))}();function d(t){f||(t&&Sn.each(t,function(t){var e,n=(e=Ou(t))?e[0]:"";Sn.isArray(n)?jn(e,function(t){Nu.apply(rn,t)}):n?Nu.apply(rn,e):t&&t&&t[0]}),Nu(function(){Du()}),f=!0)}if(0===l.length)lu(function(t){Cu=t,Du()});else try{l=An(l,function(t){var e;if("config"===((e=Ou(t))?e[0]:"")){var n=e[1],r=e[2];"autoStart"===n&&!1===r&&(s=!1)}return e}),s&&d(l)}catch(t){}Ni()}())}();
